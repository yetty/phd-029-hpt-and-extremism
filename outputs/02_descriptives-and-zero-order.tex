% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
  10pt,
]{article}
\usepackage{amsmath,amssymb}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math} % this also loads fontspec
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
\usepackage{lmodern}
\ifPDFTeX\else
  % xetex/luatex font selection
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\usepackage[landscape,margin=0.7in]{geometry}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
\usepackage{multirow}
\usepackage{float}
\usepackage{colortbl}
\usepackage{pdflscape}
\usepackage{threeparttable}
\usepackage{threeparttablex}
\usepackage[normalem]{ulem}
\usepackage{makecell}
\setlength{\LTcapwidth}{\textwidth}
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
\usepackage{multirow}
\usepackage{wrapfig}
\usepackage{float}
\usepackage{colortbl}
\usepackage{pdflscape}
\usepackage{tabu}
\usepackage{threeparttable}
\usepackage{threeparttablex}
\usepackage[normalem]{ulem}
\usepackage{makecell}
\usepackage{xcolor}
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same}
\hypersetup{
  pdftitle={Descriptives \& Zero-order associations --- HPT (Czech data)},
  pdfauthor={HPT and Extremism project},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}

\title{Descriptives \& Zero-order associations --- HPT (Czech data)}
\usepackage{etoolbox}
\makeatletter
\providecommand{\subtitle}[1]{% add subtitle to \maketitle
  \apptocmd{\@title}{\par {\large #1 \par}}{}{}
}
\makeatother
\subtitle{Means/SDs, distributions, correlations, and school/class
variation}
\author{HPT and Extremism project}
\date{2025-12-12}

\begin{document}
\maketitle

{
\setcounter{tocdepth}{3}
\tableofcontents
}
\hypertarget{purpose}{%
\section{Purpose}\label{purpose}}

This file establishes transparent baseline patterns---distributions,
scale descriptives, zero-order correlations, and between-group
variation---before any modeling. It follows the HPT framework
(POP/ROA/CONT) and scoring conventions used in prior work, but with an
explicit \textbf{presentism reversal} so that \textbf{higher HPT scores
reflect better contextualization/agent-sensitive reasoning}. FR-LF and
KSA reflect ideological/authoritarian agreement; SDR reflects
social-desirability responding. These descriptives document the
empirical landscape your hypotheses build on. \emph{Interpretation
cheatsheet appears under each table/figure.}

\hypertarget{data-packages}{%
\subsection{1) Data \& packages}\label{data-packages}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Core}
\FunctionTok{library}\NormalTok{(dplyr); }\FunctionTok{library}\NormalTok{(stringr); }\FunctionTok{library}\NormalTok{(tidyr); }\FunctionTok{library}\NormalTok{(purrr); }\FunctionTok{library}\NormalTok{(readxl)}
\CommentTok{\# Tables \& plots}
\FunctionTok{library}\NormalTok{(knitr); }\FunctionTok{library}\NormalTok{(kableExtra); }\FunctionTok{library}\NormalTok{(ggplot2); }\FunctionTok{library}\NormalTok{(scales)}
\CommentTok{\# Correlations}
\FunctionTok{library}\NormalTok{(psych)           }\CommentTok{\# corr.test}
\CommentTok{\# Multilevel \& ICC}
\FunctionTok{library}\NormalTok{(lme4)            }\CommentTok{\# lmer}
\FunctionTok{suppressPackageStartupMessages}\NormalTok{(}\FunctionTok{library}\NormalTok{(performance)) }\CommentTok{\# icc()}

\FunctionTok{theme\_set}\NormalTok{(}\FunctionTok{theme\_minimal}\NormalTok{(}\AttributeTok{base\_size =} \DecValTok{11}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Load the dataset created in 00\_data{-}preparation}
\FunctionTok{load}\NormalTok{(}\StringTok{"normalised\_responses.RData"}\NormalTok{)}
\FunctionTok{stopifnot}\NormalTok{(}\FunctionTok{exists}\NormalTok{(}\StringTok{"normalised\_responses"}\NormalTok{))}

\NormalTok{all\_data }\OtherTok{\textless{}{-}}\NormalTok{ normalised\_responses}

\CommentTok{\# {-}{-}{-} Presentism reversal \& canonical composites {-}{-}{-}}
\NormalTok{POP\_rev\_items }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(}\StringTok{"POP"}\NormalTok{, }\DecValTok{1}\SpecialCharTok{:}\DecValTok{3}\NormalTok{)}
\FunctionTok{stopifnot}\NormalTok{(}\FunctionTok{all}\NormalTok{(POP\_rev\_items }\SpecialCharTok{\%in\%} \FunctionTok{names}\NormalTok{(all\_data)))}

\NormalTok{all\_data }\OtherTok{\textless{}{-}}\NormalTok{ all\_data }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}
    \FunctionTok{across}\NormalTok{(}\FunctionTok{all\_of}\NormalTok{(POP\_rev\_items), }\SpecialCharTok{\textasciitilde{}} \DecValTok{5} \SpecialCharTok{{-}} \FunctionTok{suppressWarnings}\NormalTok{(}\FunctionTok{as.numeric}\NormalTok{(.)), }\AttributeTok{.names =} \StringTok{"\{.col\}\_rev"}\NormalTok{),}
    \AttributeTok{HPT\_POP\_raw =} \FunctionTok{rowMeans}\NormalTok{(}\FunctionTok{across}\NormalTok{(}\FunctionTok{all\_of}\NormalTok{(POP\_rev\_items)), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{),             }\CommentTok{\# presentism, higher = worse}
    \AttributeTok{HPT\_POP\_rev =} \FunctionTok{rowMeans}\NormalTok{(}\FunctionTok{across}\NormalTok{(}\FunctionTok{all\_of}\NormalTok{(}\FunctionTok{paste0}\NormalTok{(POP\_rev\_items, }\StringTok{"\_rev"}\NormalTok{))), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{),  }\CommentTok{\# higher = better}
    \AttributeTok{HPT\_CONT    =} \FunctionTok{rowMeans}\NormalTok{(}\FunctionTok{across}\NormalTok{(CONT1}\SpecialCharTok{:}\NormalTok{CONT3), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{),}
    \AttributeTok{HPT\_ROA     =} \FunctionTok{rowMeans}\NormalTok{(}\FunctionTok{across}\NormalTok{(ROA1}\SpecialCharTok{:}\NormalTok{ROA3),   }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{),}
    \CommentTok{\# Canonical composites (report BOTH; use CTX6 as primary)}
    \AttributeTok{HPT\_CTX6 =} \FunctionTok{rowMeans}\NormalTok{(}\FunctionTok{cbind}\NormalTok{(HPT\_POP\_rev, HPT\_CONT), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{),                 }\CommentTok{\# no ROA (stable default)}
    \AttributeTok{HPT\_TOT9 =} \FunctionTok{rowMeans}\NormalTok{(}\FunctionTok{cbind}\NormalTok{(HPT\_POP\_rev, HPT\_CONT, HPT\_ROA), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)         }\CommentTok{\# includes ROA}
\NormalTok{  )}

\CommentTok{\# Ensure factors as in codebook and build unique class\_id}
\NormalTok{all\_data }\OtherTok{\textless{}{-}}\NormalTok{ all\_data }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}
    \AttributeTok{school\_id    =} \FunctionTok{as.factor}\NormalTok{(school\_id),}
    \AttributeTok{class\_label  =} \FunctionTok{as.factor}\NormalTok{(class\_label),}
    \AttributeTok{school\_level =} \FunctionTok{as.factor}\NormalTok{(school\_level),}
    \AttributeTok{school\_type  =} \FunctionTok{as.factor}\NormalTok{(school\_type),}
    \AttributeTok{region       =} \FunctionTok{as.factor}\NormalTok{(region),}
    \AttributeTok{gender       =} \FunctionTok{as.factor}\NormalTok{(gender),}
    \AttributeTok{class\_id     =} \FunctionTok{interaction}\NormalTok{(school\_id, class\_label, }\AttributeTok{drop =} \ConstantTok{TRUE}\NormalTok{)}
\NormalTok{  )}
\end{Highlighting}
\end{Shaded}

\hypertarget{scoring-constructs-subscores}{%
\subsection{2) Scoring: constructs \&
subscores}\label{scoring-constructs-subscores}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Convenience scorer: mean across items with minimum answered requirement}
\NormalTok{scale\_mean }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(df, items, }\AttributeTok{min\_n =} \FunctionTok{ceiling}\NormalTok{(}\FunctionTok{length}\NormalTok{(items)}\SpecialCharTok{/}\DecValTok{2}\NormalTok{), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{) \{}
\NormalTok{  x }\OtherTok{\textless{}{-}}\NormalTok{ df[, items]}
\NormalTok{  ok }\OtherTok{\textless{}{-}} \FunctionTok{rowSums}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{is.na}\NormalTok{(x)) }\SpecialCharTok{\textgreater{}=}\NormalTok{ min\_n}
\NormalTok{  out }\OtherTok{\textless{}{-}} \FunctionTok{rowMeans}\NormalTok{(x, }\AttributeTok{na.rm =}\NormalTok{ na.rm)}
\NormalTok{  out[}\SpecialCharTok{!}\NormalTok{ok] }\OtherTok{\textless{}{-}} \ConstantTok{NA\_real\_}
\NormalTok{  out}
\NormalTok{\}}

\CommentTok{\# HPT (1{-}4): subscores and totals (explicitly using REVERSED POP)}
\NormalTok{hpt\_pop\_items\_rev  }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(}\StringTok{"POP"}\NormalTok{, }\DecValTok{1}\SpecialCharTok{:}\DecValTok{3}\NormalTok{, }\StringTok{"\_rev"}\NormalTok{)   }\CommentTok{\# reversed presentism}
\NormalTok{hpt\_roa\_items      }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"ROA1"}\NormalTok{,}\StringTok{"ROA2"}\NormalTok{,}\StringTok{"ROA3"}\NormalTok{)}
\NormalTok{hpt\_cont\_items     }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"CONT1"}\NormalTok{,}\StringTok{"CONT2"}\NormalTok{,}\StringTok{"CONT3"}\NormalTok{)}

\CommentTok{\# Knowledge (0{-}6 correct)}
\NormalTok{kn\_items }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(}\StringTok{"KN"}\NormalTok{, }\DecValTok{1}\SpecialCharTok{:}\DecValTok{6}\NormalTok{)}

\CommentTok{\# FR{-}LF mini (1{-}5 Likert): RD1{-}3 + NS1{-}3}
\NormalTok{frlf\_rd }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(}\StringTok{"RD"}\NormalTok{, }\DecValTok{1}\SpecialCharTok{:}\DecValTok{3}\NormalTok{)}
\NormalTok{frlf\_ns }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(}\StringTok{"NS"}\NormalTok{, }\DecValTok{1}\SpecialCharTok{:}\DecValTok{3}\NormalTok{)}

\CommentTok{\# KSA{-}3 authoritarianism (1{-}5 Likert): 9 items}
\NormalTok{ksa\_items }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\FunctionTok{paste0}\NormalTok{(}\StringTok{"A"}\NormalTok{,}\DecValTok{1}\SpecialCharTok{:}\DecValTok{3}\NormalTok{), }\FunctionTok{paste0}\NormalTok{(}\StringTok{"U"}\NormalTok{,}\DecValTok{1}\SpecialCharTok{:}\DecValTok{3}\NormalTok{), }\FunctionTok{paste0}\NormalTok{(}\StringTok{"K"}\NormalTok{,}\DecValTok{1}\SpecialCharTok{:}\DecValTok{3}\NormalTok{))}

\CommentTok{\# SDR{-}5 (1{-}5 Likert): SDR2{-}SDR4 already reversed in the dataset per codebook}
\NormalTok{sdr\_items }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(}\StringTok{"SDR"}\NormalTok{, }\DecValTok{1}\SpecialCharTok{:}\DecValTok{5}\NormalTok{)}

\CommentTok{\# Build scores (HPT\_TOTAL := CTX6 as primary; also keep HPT\_TOT9 for reference)}
\NormalTok{dat }\OtherTok{\textless{}{-}}\NormalTok{ all\_data }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}
    \AttributeTok{HPT\_POP    =} \FunctionTok{scale\_mean}\NormalTok{(., hpt\_pop\_items\_rev,  }\AttributeTok{min\_n =} \DecValTok{2}\NormalTok{),        }\CommentTok{\# already reversed}
    \AttributeTok{HPT\_ROA    =} \FunctionTok{scale\_mean}\NormalTok{(., hpt\_roa\_items,      }\AttributeTok{min\_n =} \DecValTok{2}\NormalTok{),}
    \AttributeTok{HPT\_CONT   =} \FunctionTok{scale\_mean}\NormalTok{(., hpt\_cont\_items,     }\AttributeTok{min\_n =} \DecValTok{2}\NormalTok{),}
    \AttributeTok{HPT\_TOTAL  =} \FunctionTok{scale\_mean}\NormalTok{(., }\FunctionTok{c}\NormalTok{(hpt\_pop\_items\_rev, hpt\_roa\_items, hpt\_cont\_items), }\AttributeTok{min\_n =} \DecValTok{5}\NormalTok{),}
    \CommentTok{\# Also expose explicit composites computed above}
    \AttributeTok{HPT\_CTX6   =}\NormalTok{ HPT\_CTX6,}
    \AttributeTok{HPT\_TOT9   =}\NormalTok{ HPT\_TOT9,}
    \AttributeTok{KN\_TOTAL   =} \FunctionTok{rowSums}\NormalTok{(dplyr}\SpecialCharTok{::}\FunctionTok{select}\NormalTok{(., }\FunctionTok{all\_of}\NormalTok{(kn\_items)), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{),}
    \AttributeTok{FRLF\_RD    =} \FunctionTok{scale\_mean}\NormalTok{(., frlf\_rd, }\AttributeTok{min\_n =} \DecValTok{2}\NormalTok{),}
    \AttributeTok{FRLF\_NS    =} \FunctionTok{scale\_mean}\NormalTok{(., frlf\_ns, }\AttributeTok{min\_n =} \DecValTok{2}\NormalTok{),}
    \AttributeTok{FRLF\_MINI  =} \FunctionTok{scale\_mean}\NormalTok{(., }\FunctionTok{c}\NormalTok{(frlf\_rd, frlf\_ns), }\AttributeTok{min\_n =} \DecValTok{4}\NormalTok{),}
    \AttributeTok{KSA\_TOTAL  =} \FunctionTok{scale\_mean}\NormalTok{(., ksa\_items, }\AttributeTok{min\_n =} \DecValTok{7}\NormalTok{),}
    \AttributeTok{SDR\_TOTAL  =} \FunctionTok{scale\_mean}\NormalTok{(., sdr\_items, }\AttributeTok{min\_n =} \DecValTok{4}\NormalTok{)}
\NormalTok{  )}
\end{Highlighting}
\end{Shaded}

\begin{quote}
\textbf{How to read:} • \textbf{HPT (HPT\_TOTAL)} uses \textbf{reversed
POP} by construction; higher = better contextualization. •
\textbf{HPT\_CTX6} (POP\_rev + CONT) is our \textbf{primary descriptive
score}; \textbf{HPT\_TOT9} (adds ROA) is reported for reference. •
\textbf{Knowledge (KN\_TOTAL)}: 0--6 correct. \textbf{FR-LF/KSA/SDR}
follow codebook.
\end{quote}

\hypertarget{sample-overview}{%
\subsection{3) Sample overview}\label{sample-overview}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{vars\_context }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"school\_id"}\NormalTok{,}\StringTok{"class\_label"}\NormalTok{,}\StringTok{"school\_level"}\NormalTok{,}\StringTok{"school\_type"}\NormalTok{,}\StringTok{"region"}\NormalTok{,}\StringTok{"gender"}\NormalTok{,}\StringTok{"history\_grade"}\NormalTok{)}
\NormalTok{n\_raw }\OtherTok{\textless{}{-}} \FunctionTok{nrow}\NormalTok{(all\_data); n\_anal }\OtherTok{\textless{}{-}} \FunctionTok{nrow}\NormalTok{(dat)}

\FunctionTok{kable}\NormalTok{(}\FunctionTok{data.frame}\NormalTok{(}
  \AttributeTok{N\_raw =}\NormalTok{ n\_raw,}
  \AttributeTok{N\_after\_scoring =}\NormalTok{ n\_anal,}
  \AttributeTok{classes =}\NormalTok{ dplyr}\SpecialCharTok{::}\FunctionTok{n\_distinct}\NormalTok{(all\_data}\SpecialCharTok{$}\NormalTok{class\_id),}
  \AttributeTok{schools =}\NormalTok{ dplyr}\SpecialCharTok{::}\FunctionTok{n\_distinct}\NormalTok{(all\_data}\SpecialCharTok{$}\NormalTok{school\_id)}
\NormalTok{), }\AttributeTok{caption =} \StringTok{"Sample counters (after loading and scoring)."}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{kable\_styling}\NormalTok{(}\AttributeTok{full\_width =} \ConstantTok{FALSE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[t]{rrrr}
\caption{\label{tab:sample-overview}Sample counters (after loading and scoring).}\\
\toprule
N\_raw & N\_after\_scoring & classes & schools\\
\midrule
234 & 234 & 16 & 8\\
\bottomrule
\end{longtable}

\hypertarget{descriptives-means-sds-n-range}{%
\subsection{4) Descriptives (means, SDs, n,
range)}\label{descriptives-means-sds-n-range}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Report both totals explicitly}
\NormalTok{desc\_vars }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"HPT\_POP"}\NormalTok{,}\StringTok{"HPT\_ROA"}\NormalTok{,}\StringTok{"HPT\_CONT"}\NormalTok{,}\StringTok{"HPT\_CTX6"}\NormalTok{,}\StringTok{"HPT\_TOT9"}\NormalTok{,}
               \StringTok{"KN\_TOTAL"}\NormalTok{,}\StringTok{"FRLF\_RD"}\NormalTok{,}\StringTok{"FRLF\_NS"}\NormalTok{,}\StringTok{"FRLF\_MINI"}\NormalTok{,}
               \StringTok{"KSA\_TOTAL"}\NormalTok{,}\StringTok{"SDR\_TOTAL"}\NormalTok{)}

\NormalTok{desc\_tbl }\OtherTok{\textless{}{-}}\NormalTok{ dat }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{summarise}\NormalTok{(}\FunctionTok{across}\NormalTok{(}\FunctionTok{all\_of}\NormalTok{(desc\_vars),}
                   \FunctionTok{list}\NormalTok{(}\AttributeTok{n =} \SpecialCharTok{\textasciitilde{}}\FunctionTok{sum}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{is.na}\NormalTok{(.)),}
                        \AttributeTok{mean =} \SpecialCharTok{\textasciitilde{}}\FunctionTok{mean}\NormalTok{(., }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{),}
                        \AttributeTok{sd =} \SpecialCharTok{\textasciitilde{}}\FunctionTok{sd}\NormalTok{(., }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{),}
                        \AttributeTok{min =} \SpecialCharTok{\textasciitilde{}}\FunctionTok{min}\NormalTok{(., }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{),}
                        \AttributeTok{max =} \SpecialCharTok{\textasciitilde{}}\FunctionTok{max}\NormalTok{(., }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{)))) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{pivot\_longer}\NormalTok{(}\FunctionTok{everything}\NormalTok{(),}
               \AttributeTok{names\_to =} \FunctionTok{c}\NormalTok{(}\StringTok{"variable"}\NormalTok{,}\StringTok{".value"}\NormalTok{),}
               \AttributeTok{names\_pattern =} \StringTok{"([\^{}\_]+\_[\^{}\_]+|[\^{}\_]+)\_(n|mean|sd|min|max)"}\NormalTok{)}

\CommentTok{\# Keep original order}
\NormalTok{desc\_tbl}\SpecialCharTok{$}\NormalTok{variable }\OtherTok{\textless{}{-}} \FunctionTok{factor}\NormalTok{(desc\_tbl}\SpecialCharTok{$}\NormalTok{variable, }\AttributeTok{levels =}\NormalTok{ desc\_vars)}

\FunctionTok{kable}\NormalTok{(desc\_tbl[}\FunctionTok{order}\NormalTok{(desc\_tbl}\SpecialCharTok{$}\NormalTok{variable),], }\AttributeTok{booktabs =} \ConstantTok{TRUE}\NormalTok{, }\AttributeTok{digits =} \DecValTok{2}\NormalTok{,}
      \AttributeTok{caption =} \StringTok{"Scale descriptives (student{-}level)."}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{kable\_styling}\NormalTok{(}\AttributeTok{latex\_options =} \FunctionTok{c}\NormalTok{(}\StringTok{"striped"}\NormalTok{,}\StringTok{"hold\_position"}\NormalTok{), }\AttributeTok{full\_width =} \ConstantTok{FALSE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[t]{lrrrrr}
\caption{\label{tab:descriptives}Scale descriptives (student-level).}\\
\toprule
variable & n & mean & sd & min & max\\
\midrule
\cellcolor{gray!10}{HPT\_POP} & \cellcolor{gray!10}{229} & \cellcolor{gray!10}{2.99} & \cellcolor{gray!10}{0.65} & \cellcolor{gray!10}{1.33} & \cellcolor{gray!10}{4.00}\\
HPT\_ROA & 229 & 2.81 & 0.65 & 1.00 & 4.00\\
\cellcolor{gray!10}{HPT\_CONT} & \cellcolor{gray!10}{229} & \cellcolor{gray!10}{2.73} & \cellcolor{gray!10}{0.74} & \cellcolor{gray!10}{1.00} & \cellcolor{gray!10}{4.00}\\
HPT\_CTX6 & 229 & 2.86 & 0.57 & 1.33 & 4.00\\
\cellcolor{gray!10}{HPT\_TOT9} & \cellcolor{gray!10}{229} & \cellcolor{gray!10}{2.84} & \cellcolor{gray!10}{0.49} & \cellcolor{gray!10}{1.67} & \cellcolor{gray!10}{3.89}\\
\addlinespace
KN\_TOTAL & 234 & 3.15 & 1.66 & 0.00 & 6.00\\
\cellcolor{gray!10}{FRLF\_RD} & \cellcolor{gray!10}{228} & \cellcolor{gray!10}{2.53} & \cellcolor{gray!10}{0.91} & \cellcolor{gray!10}{1.00} & \cellcolor{gray!10}{5.00}\\
FRLF\_NS & 229 & 2.44 & 0.93 & 1.00 & 5.00\\
\cellcolor{gray!10}{FRLF\_MINI} & \cellcolor{gray!10}{227} & \cellcolor{gray!10}{2.49} & \cellcolor{gray!10}{0.78} & \cellcolor{gray!10}{1.00} & \cellcolor{gray!10}{5.00}\\
KSA\_TOTAL & 227 & 2.89 & 0.64 & 1.00 & 5.00\\
\addlinespace
\cellcolor{gray!10}{SDR\_TOTAL} & \cellcolor{gray!10}{227} & \cellcolor{gray!10}{3.01} & \cellcolor{gray!10}{0.62} & \cellcolor{gray!10}{1.00} & \cellcolor{gray!10}{4.40}\\
\bottomrule
\end{longtable}

\begin{quote}
\textbf{Interpretation:} HPT scales should center above 2.5 if students
generally avoid presentism and contextualize; FR-LF/KSA are not
``good/bad'' in isolation but provide ideological context for later
modeling; SDR alerts to response bias.
\end{quote}

\hypertarget{distributions-histograms-same-axes-where-possible}{%
\subsection{5) Distributions (histograms, same axes where
possible)}\label{distributions-histograms-same-axes-where-possible}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{long\_scales }\OtherTok{\textless{}{-}}\NormalTok{ dat }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{select}\NormalTok{(}\FunctionTok{all\_of}\NormalTok{(desc\_vars)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{pivot\_longer}\NormalTok{(}\FunctionTok{everything}\NormalTok{(), }\AttributeTok{names\_to =} \StringTok{"scale"}\NormalTok{, }\AttributeTok{values\_to =} \StringTok{"value"}\NormalTok{)}

\FunctionTok{ggplot}\NormalTok{(long\_scales, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ value)) }\SpecialCharTok{+}
  \FunctionTok{geom\_histogram}\NormalTok{(}\AttributeTok{bins =} \DecValTok{20}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{facet\_wrap}\NormalTok{(}\SpecialCharTok{\textasciitilde{}}\NormalTok{scale, }\AttributeTok{scales =} \StringTok{"free"}\NormalTok{, }\AttributeTok{ncol =} \DecValTok{3}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Distributions of scales"}\NormalTok{, }\AttributeTok{x =} \StringTok{"Score"}\NormalTok{, }\AttributeTok{y =} \StringTok{"Count"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{center}\includegraphics[width=0.95\linewidth]{/home/yetty/Projects/phd-029-hpt-and-extremism/outputs/02_descriptives-and-zero-order_files/figure-latex/hists-1} \end{center}

\begin{quote}
\textbf{Interpretation:} Watch for spikes at bounds (e.g., KN at 0 or
max), floor/ceiling on FR-LF/KSA, and skew in HPT subscores---useful
cues for later transformation or robust modeling.
\end{quote}

\hypertarget{zero-order-correlations-student-level}{%
\subsection{6) Zero-order correlations (student
level)}\label{zero-order-correlations-student-level}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{corr\_df }\OtherTok{\textless{}{-}}\NormalTok{ dat }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{select}\NormalTok{(}\FunctionTok{all\_of}\NormalTok{(desc\_vars)) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{drop\_na}\NormalTok{()}
\NormalTok{ct }\OtherTok{\textless{}{-}}\NormalTok{ psych}\SpecialCharTok{::}\FunctionTok{corr.test}\NormalTok{(corr\_df, }\AttributeTok{use =} \StringTok{"pairwise"}\NormalTok{)}
\FunctionTok{round}\NormalTok{(ct}\SpecialCharTok{$}\NormalTok{r, }\DecValTok{2}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##           HPT_POP HPT_ROA HPT_CONT HPT_CTX6 HPT_TOT9 KN_TOTAL FRLF_RD FRLF_NS
## HPT_POP      1.00    0.15     0.33     0.79     0.67     0.33   -0.09   -0.10
## HPT_ROA      0.15    1.00     0.38     0.33     0.69     0.29   -0.05   -0.06
## HPT_CONT     0.33    0.38     1.00     0.84     0.81     0.20    0.00    0.06
## HPT_CTX6     0.79    0.33     0.84     1.00     0.91     0.32   -0.05   -0.02
## HPT_TOT9     0.67    0.69     0.81     0.91     1.00     0.37   -0.06   -0.04
## KN_TOTAL     0.33    0.29     0.20     0.32     0.37     1.00   -0.07   -0.15
## FRLF_RD     -0.09   -0.05     0.00    -0.05    -0.06    -0.07    1.00    0.43
## FRLF_NS     -0.10   -0.06     0.06    -0.02    -0.04    -0.15    0.43    1.00
## FRLF_MINI   -0.11   -0.06     0.03    -0.04    -0.06    -0.13    0.84    0.85
## KSA_TOTAL   -0.15    0.01     0.06    -0.05    -0.03     0.03    0.47    0.39
## SDR_TOTAL   -0.02    0.05    -0.02    -0.02     0.00     0.03   -0.06   -0.28
##           FRLF_MINI KSA_TOTAL SDR_TOTAL
## HPT_POP       -0.11     -0.15     -0.02
## HPT_ROA       -0.06      0.01      0.05
## HPT_CONT       0.03      0.06     -0.02
## HPT_CTX6      -0.04     -0.05     -0.02
## HPT_TOT9      -0.06     -0.03      0.00
## KN_TOTAL      -0.13      0.03      0.03
## FRLF_RD        0.84      0.47     -0.06
## FRLF_NS        0.85      0.39     -0.28
## FRLF_MINI      1.00      0.51     -0.20
## KSA_TOTAL      0.51      1.00     -0.18
## SDR_TOTAL     -0.20     -0.18      1.00
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{corr\_tab }\OtherTok{\textless{}{-}} \FunctionTok{as.data.frame}\NormalTok{(}\FunctionTok{round}\NormalTok{(ct}\SpecialCharTok{$}\NormalTok{r, }\DecValTok{2}\NormalTok{))}
\NormalTok{corr\_tab}\SpecialCharTok{$}\NormalTok{Var1 }\OtherTok{\textless{}{-}} \FunctionTok{rownames}\NormalTok{(corr\_tab)}
\NormalTok{corr\_tab }\OtherTok{\textless{}{-}}\NormalTok{ corr\_tab }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{relocate}\NormalTok{(Var1)}

\FunctionTok{kable}\NormalTok{(corr\_tab, }\AttributeTok{booktabs =} \ConstantTok{TRUE}\NormalTok{, }\AttributeTok{caption =} \StringTok{"Zero{-}order Pearson correlations among constructs (pairwise)."}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{kable\_styling}\NormalTok{(}\AttributeTok{latex\_options =} \FunctionTok{c}\NormalTok{(}\StringTok{"hold\_position"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[t]{llrrrrrrrrrrr}
\caption{\label{tab:cor-table}Zero-order Pearson correlations among constructs (pairwise).}\\
\toprule
 & Var1 & HPT\_POP & HPT\_ROA & HPT\_CONT & HPT\_CTX6 & HPT\_TOT9 & KN\_TOTAL & FRLF\_RD & FRLF\_NS & FRLF\_MINI & KSA\_TOTAL & SDR\_TOTAL\\
\midrule
HPT\_POP & HPT\_POP & 1.00 & 0.15 & 0.33 & 0.79 & 0.67 & 0.33 & -0.09 & -0.10 & -0.11 & -0.15 & -0.02\\
HPT\_ROA & HPT\_ROA & 0.15 & 1.00 & 0.38 & 0.33 & 0.69 & 0.29 & -0.05 & -0.06 & -0.06 & 0.01 & 0.05\\
HPT\_CONT & HPT\_CONT & 0.33 & 0.38 & 1.00 & 0.84 & 0.81 & 0.20 & 0.00 & 0.06 & 0.03 & 0.06 & -0.02\\
HPT\_CTX6 & HPT\_CTX6 & 0.79 & 0.33 & 0.84 & 1.00 & 0.91 & 0.32 & -0.05 & -0.02 & -0.04 & -0.05 & -0.02\\
HPT\_TOT9 & HPT\_TOT9 & 0.67 & 0.69 & 0.81 & 0.91 & 1.00 & 0.37 & -0.06 & -0.04 & -0.06 & -0.03 & 0.00\\
\addlinespace
KN\_TOTAL & KN\_TOTAL & 0.33 & 0.29 & 0.20 & 0.32 & 0.37 & 1.00 & -0.07 & -0.15 & -0.13 & 0.03 & 0.03\\
FRLF\_RD & FRLF\_RD & -0.09 & -0.05 & 0.00 & -0.05 & -0.06 & -0.07 & 1.00 & 0.43 & 0.84 & 0.47 & -0.06\\
FRLF\_NS & FRLF\_NS & -0.10 & -0.06 & 0.06 & -0.02 & -0.04 & -0.15 & 0.43 & 1.00 & 0.85 & 0.39 & -0.28\\
FRLF\_MINI & FRLF\_MINI & -0.11 & -0.06 & 0.03 & -0.04 & -0.06 & -0.13 & 0.84 & 0.85 & 1.00 & 0.51 & -0.20\\
KSA\_TOTAL & KSA\_TOTAL & -0.15 & 0.01 & 0.06 & -0.05 & -0.03 & 0.03 & 0.47 & 0.39 & 0.51 & 1.00 & -0.18\\
\addlinespace
SDR\_TOTAL & SDR\_TOTAL & -0.02 & 0.05 & -0.02 & -0.02 & 0.00 & 0.03 & -0.06 & -0.28 & -0.20 & -0.18 & 1.00\\
\bottomrule
\end{longtable}

\begin{quote}
\textbf{Interpretation:} Correlations locate broad relationships your
hypotheses rely on. For example, if \textbf{FRLF\_MINI} correlates
positively with \textbf{HPT\_CTX6/HPT\_TOT9}, this suggests possible
ideological alignment inflating contextualization---an effect to test
with controls in models (knowledge, SDR) and with item-level checks
later.
\end{quote}

\hypertarget{between-group-variation-schoolclass-iccs}{%
\subsection{7) Between-group variation: school/class
ICCs}\label{between-group-variation-schoolclass-iccs}}

We estimate the variance attributable to schools and classes with
random-intercept models. ICC ≈ proportion of total variance that is
between clusters.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# {-}{-}{-} Robust ICC helpers {-}{-}{-}}
\NormalTok{get\_icc\_value }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(ic) \{}
  \ControlFlowTok{if}\NormalTok{ (}\FunctionTok{is.null}\NormalTok{(ic)) }\FunctionTok{return}\NormalTok{(}\ConstantTok{NA\_real\_}\NormalTok{)}
  \ControlFlowTok{if}\NormalTok{ (}\FunctionTok{is.data.frame}\NormalTok{(ic)) \{}
    \ControlFlowTok{if}\NormalTok{ (}\StringTok{"ICC\_adjusted"} \SpecialCharTok{\%in\%} \FunctionTok{names}\NormalTok{(ic)) }\FunctionTok{return}\NormalTok{(}\FunctionTok{suppressWarnings}\NormalTok{(}\FunctionTok{as.numeric}\NormalTok{(ic}\SpecialCharTok{$}\NormalTok{ICC\_adjusted[}\DecValTok{1}\NormalTok{])))}
    \ControlFlowTok{if}\NormalTok{ (}\StringTok{"ICC"} \SpecialCharTok{\%in\%} \FunctionTok{names}\NormalTok{(ic))          }\FunctionTok{return}\NormalTok{(}\FunctionTok{suppressWarnings}\NormalTok{(}\FunctionTok{as.numeric}\NormalTok{(ic}\SpecialCharTok{$}\NormalTok{ICC[}\DecValTok{1}\NormalTok{])))}
\NormalTok{    num\_cols }\OtherTok{\textless{}{-}} \FunctionTok{which}\NormalTok{(}\FunctionTok{vapply}\NormalTok{(ic, is.numeric, }\FunctionTok{logical}\NormalTok{(}\DecValTok{1}\NormalTok{)))}
    \ControlFlowTok{if}\NormalTok{ (}\FunctionTok{length}\NormalTok{(num\_cols)) }\FunctionTok{return}\NormalTok{(}\FunctionTok{as.numeric}\NormalTok{(ic[[ num\_cols[}\DecValTok{1}\NormalTok{] ]][}\DecValTok{1}\NormalTok{]))}
    \FunctionTok{return}\NormalTok{(}\ConstantTok{NA\_real\_}\NormalTok{)}
\NormalTok{  \}}
  \ControlFlowTok{if}\NormalTok{ (}\FunctionTok{is.list}\NormalTok{(ic)) \{}
    \ControlFlowTok{if}\NormalTok{ (}\SpecialCharTok{!}\FunctionTok{is.null}\NormalTok{(ic}\SpecialCharTok{$}\NormalTok{ICC\_adjusted)) }\FunctionTok{return}\NormalTok{(}\FunctionTok{suppressWarnings}\NormalTok{(}\FunctionTok{as.numeric}\NormalTok{(ic}\SpecialCharTok{$}\NormalTok{ICC\_adjusted)))}
    \ControlFlowTok{if}\NormalTok{ (}\SpecialCharTok{!}\FunctionTok{is.null}\NormalTok{(ic}\SpecialCharTok{$}\NormalTok{ICC))          }\FunctionTok{return}\NormalTok{(}\FunctionTok{suppressWarnings}\NormalTok{(}\FunctionTok{as.numeric}\NormalTok{(ic}\SpecialCharTok{$}\NormalTok{ICC)))}
\NormalTok{    nums }\OtherTok{\textless{}{-}} \FunctionTok{unlist}\NormalTok{(ic[ }\FunctionTok{vapply}\NormalTok{(ic, is.numeric, }\FunctionTok{logical}\NormalTok{(}\DecValTok{1}\NormalTok{)) ], }\AttributeTok{use.names =} \ConstantTok{FALSE}\NormalTok{)}
    \ControlFlowTok{if}\NormalTok{ (}\FunctionTok{length}\NormalTok{(nums)) }\FunctionTok{return}\NormalTok{(}\FunctionTok{as.numeric}\NormalTok{(nums[}\DecValTok{1}\NormalTok{]))}
    \FunctionTok{return}\NormalTok{(}\ConstantTok{NA\_real\_}\NormalTok{)}
\NormalTok{  \}}
  \ControlFlowTok{if}\NormalTok{ (}\FunctionTok{is.atomic}\NormalTok{(ic) }\SpecialCharTok{\&\&} \FunctionTok{is.numeric}\NormalTok{(ic)) }\FunctionTok{return}\NormalTok{(}\FunctionTok{as.numeric}\NormalTok{(ic[}\DecValTok{1}\NormalTok{]))}
  \ConstantTok{NA\_real\_}
\NormalTok{\}}

\NormalTok{fit\_icc }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(v) \{}
  \ControlFlowTok{if}\NormalTok{ (}\SpecialCharTok{!}\NormalTok{v }\SpecialCharTok{\%in\%} \FunctionTok{names}\NormalTok{(dat)) }\FunctionTok{return}\NormalTok{(}\ConstantTok{NULL}\NormalTok{)}
\NormalTok{  f\_cls }\OtherTok{\textless{}{-}} \FunctionTok{as.formula}\NormalTok{(}\FunctionTok{paste0}\NormalTok{(v, }\StringTok{" \textasciitilde{} 1 + (1|school\_id) + (1|class\_id)"}\NormalTok{))}
\NormalTok{  f\_sch }\OtherTok{\textless{}{-}} \FunctionTok{as.formula}\NormalTok{(}\FunctionTok{paste0}\NormalTok{(v, }\StringTok{" \textasciitilde{} 1 + (1|school\_id)"}\NormalTok{))}
  \FunctionTok{list}\NormalTok{(}
    \AttributeTok{class\_in\_school =} \FunctionTok{tryCatch}\NormalTok{(lme4}\SpecialCharTok{::}\FunctionTok{lmer}\NormalTok{(f\_cls, }\AttributeTok{data =}\NormalTok{ dat, }\AttributeTok{REML =} \ConstantTok{TRUE}\NormalTok{, }\AttributeTok{na.action =}\NormalTok{ na.omit),}
                               \AttributeTok{error =} \ControlFlowTok{function}\NormalTok{(e) }\ConstantTok{NULL}\NormalTok{),}
    \AttributeTok{school\_only     =} \FunctionTok{tryCatch}\NormalTok{(lme4}\SpecialCharTok{::}\FunctionTok{lmer}\NormalTok{(f\_sch, }\AttributeTok{data =}\NormalTok{ dat, }\AttributeTok{REML =} \ConstantTok{TRUE}\NormalTok{, }\AttributeTok{na.action =}\NormalTok{ na.omit),}
                               \AttributeTok{error =} \ControlFlowTok{function}\NormalTok{(e) }\ConstantTok{NULL}\NormalTok{)}
\NormalTok{  )}
\NormalTok{\}}

\NormalTok{extract\_icc }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(fm) \{}
  \ControlFlowTok{if}\NormalTok{ (}\FunctionTok{is.null}\NormalTok{(fm)) }\FunctionTok{return}\NormalTok{(}\FunctionTok{list}\NormalTok{(}\AttributeTok{ICC =} \ConstantTok{NA\_real\_}\NormalTok{, }\AttributeTok{N =} \ConstantTok{NA\_integer\_}\NormalTok{, }\AttributeTok{clusters =} \ConstantTok{NA\_integer\_}\NormalTok{))}
\NormalTok{  ic }\OtherTok{\textless{}{-}} \FunctionTok{tryCatch}\NormalTok{(performance}\SpecialCharTok{::}\FunctionTok{icc}\NormalTok{(fm), }\AttributeTok{error =} \ControlFlowTok{function}\NormalTok{(e) }\ConstantTok{NULL}\NormalTok{)}
\NormalTok{  icc\_val }\OtherTok{\textless{}{-}} \FunctionTok{get\_icc\_value}\NormalTok{(ic)}
\NormalTok{  N }\OtherTok{\textless{}{-}} \FunctionTok{tryCatch}\NormalTok{(}\FunctionTok{nobs}\NormalTok{(fm), }\AttributeTok{error =} \ControlFlowTok{function}\NormalTok{(e) }\ConstantTok{NA\_integer\_}\NormalTok{)}
\NormalTok{  clusters }\OtherTok{\textless{}{-}} \FunctionTok{tryCatch}\NormalTok{(\{}
\NormalTok{    fl }\OtherTok{\textless{}{-}}\NormalTok{ lme4}\SpecialCharTok{::}\FunctionTok{getME}\NormalTok{(fm, }\StringTok{"flist"}\NormalTok{)}
    \FunctionTok{length}\NormalTok{(}\FunctionTok{levels}\NormalTok{(fl[[}\DecValTok{1}\NormalTok{]]))}
\NormalTok{  \}, }\AttributeTok{error =} \ControlFlowTok{function}\NormalTok{(e) }\ConstantTok{NA\_integer\_}\NormalTok{)}
  \FunctionTok{list}\NormalTok{(}\AttributeTok{ICC =}\NormalTok{ icc\_val, }\AttributeTok{N =}\NormalTok{ N, }\AttributeTok{clusters =}\NormalTok{ clusters)}
\NormalTok{\}}

\NormalTok{targets }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"HPT\_CTX6"}\NormalTok{,}\StringTok{"HPT\_TOT9"}\NormalTok{,}\StringTok{"HPT\_POP"}\NormalTok{,}\StringTok{"HPT\_ROA"}\NormalTok{,}\StringTok{"HPT\_CONT"}\NormalTok{,}
             \StringTok{"FRLF\_MINI"}\NormalTok{,}\StringTok{"KSA\_TOTAL"}\NormalTok{,}\StringTok{"KN\_TOTAL"}\NormalTok{,}\StringTok{"SDR\_TOTAL"}\NormalTok{)}

\NormalTok{icc\_rows }\OtherTok{\textless{}{-}}\NormalTok{ purrr}\SpecialCharTok{::}\FunctionTok{map}\NormalTok{(targets, }\ControlFlowTok{function}\NormalTok{(sc) \{}
\NormalTok{  mods }\OtherTok{\textless{}{-}} \FunctionTok{fit\_icc}\NormalTok{(sc)}
\NormalTok{  cls }\OtherTok{\textless{}{-}} \FunctionTok{extract\_icc}\NormalTok{(mods}\SpecialCharTok{$}\NormalTok{class\_in\_school)}
\NormalTok{  sch }\OtherTok{\textless{}{-}} \FunctionTok{extract\_icc}\NormalTok{(mods}\SpecialCharTok{$}\NormalTok{school\_only)}
  \FunctionTok{data.frame}\NormalTok{(}
    \AttributeTok{scale =}\NormalTok{ sc,}
    \AttributeTok{ICC\_class\_in\_school =} \FunctionTok{round}\NormalTok{(cls}\SpecialCharTok{$}\NormalTok{ICC, }\DecValTok{3}\NormalTok{),}
    \AttributeTok{N\_class\_in\_school   =} \FunctionTok{as.integer}\NormalTok{(cls}\SpecialCharTok{$}\NormalTok{N),}
    \AttributeTok{clusters\_classes    =} \FunctionTok{as.integer}\NormalTok{(cls}\SpecialCharTok{$}\NormalTok{clusters),}
    \AttributeTok{ICC\_school\_only     =} \FunctionTok{round}\NormalTok{(sch}\SpecialCharTok{$}\NormalTok{ICC, }\DecValTok{3}\NormalTok{),}
    \AttributeTok{N\_school\_only       =} \FunctionTok{as.integer}\NormalTok{(sch}\SpecialCharTok{$}\NormalTok{N),}
    \AttributeTok{clusters\_schools    =} \FunctionTok{as.integer}\NormalTok{(sch}\SpecialCharTok{$}\NormalTok{clusters)}
\NormalTok{  )}
\NormalTok{\})}
\NormalTok{icc\_res }\OtherTok{\textless{}{-}}\NormalTok{ dplyr}\SpecialCharTok{::}\FunctionTok{bind\_rows}\NormalTok{(icc\_rows)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{kable}\NormalTok{(icc\_res, }\AttributeTok{booktabs =} \ConstantTok{TRUE}\NormalTok{,}
      \AttributeTok{caption =} \StringTok{"Intraclass correlations (ICCs): class (nested in school) and school."}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{kable\_styling}\NormalTok{(}\AttributeTok{latex\_options =} \FunctionTok{c}\NormalTok{(}\StringTok{"striped"}\NormalTok{,}\StringTok{"hold\_position"}\NormalTok{), }\AttributeTok{full\_width =} \ConstantTok{FALSE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[t]{lrrrrrr}
\caption{\label{tab:icc-table}Intraclass correlations (ICCs): class (nested in school) and school.}\\
\toprule
scale & ICC\_class\_in\_school & N\_class\_in\_school & clusters\_classes & ICC\_school\_only & N\_school\_only & clusters\_schools\\
\midrule
\cellcolor{gray!10}{HPT\_CTX6} & \cellcolor{gray!10}{NA} & \cellcolor{gray!10}{229} & \cellcolor{gray!10}{16} & \cellcolor{gray!10}{0.049} & \cellcolor{gray!10}{229} & \cellcolor{gray!10}{8}\\
HPT\_TOT9 & NA & 229 & 16 & 0.076 & 229 & 8\\
\cellcolor{gray!10}{HPT\_POP} & \cellcolor{gray!10}{NA} & \cellcolor{gray!10}{229} & \cellcolor{gray!10}{16} & \cellcolor{gray!10}{0.031} & \cellcolor{gray!10}{229} & \cellcolor{gray!10}{8}\\
HPT\_ROA & 0.038 & 229 & 16 & 0.033 & 229 & 8\\
\cellcolor{gray!10}{HPT\_CONT} & \cellcolor{gray!10}{0.047} & \cellcolor{gray!10}{229} & \cellcolor{gray!10}{16} & \cellcolor{gray!10}{0.044} & \cellcolor{gray!10}{229} & \cellcolor{gray!10}{8}\\
\addlinespace
FRLF\_MINI & 0.086 & 227 & 16 & 0.074 & 227 & 8\\
\cellcolor{gray!10}{KSA\_TOTAL} & \cellcolor{gray!10}{0.112} & \cellcolor{gray!10}{227} & \cellcolor{gray!10}{16} & \cellcolor{gray!10}{0.088} & \cellcolor{gray!10}{227} & \cellcolor{gray!10}{8}\\
KN\_TOTAL & NA & 234 & 16 & 0.035 & 234 & 8\\
\cellcolor{gray!10}{SDR\_TOTAL} & \cellcolor{gray!10}{NA} & \cellcolor{gray!10}{227} & \cellcolor{gray!10}{16} & \cellcolor{gray!10}{NA} & \cellcolor{gray!10}{227} & \cellcolor{gray!10}{8}\\
\bottomrule
\end{longtable}

\begin{quote}
\textbf{Interpretation:} • \textbf{ICC \textasciitilde{} 0.00-0.05} →
little clustering (ordinary regression OK). • \textbf{ICC
\textasciitilde{} 0.05-0.15} → modest clustering; use cluster-robust SE
or multilevel models. • \textbf{ICC \textgreater{} 0.15} → strong
clustering; multilevel modeling recommended. Compare \textbf{HPT} vs
\textbf{FR-LF/KSA}: larger ICCs for ideology might reflect school
milieu; larger ICCs for HPT may signal classroom task/context effects.
\end{quote}

\hypertarget{quick-sanity-plots-by-classschool-optional}{%
\subsection{8) Quick sanity plots by class/school
(optional)}\label{quick-sanity-plots-by-classschool-optional}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{p1 }\OtherTok{\textless{}{-}}\NormalTok{ dat }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{group\_by}\NormalTok{(school\_id, class\_id, class\_label) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{n =} \FunctionTok{n}\NormalTok{(),}
            \AttributeTok{HPT\_CTX6 =} \FunctionTok{mean}\NormalTok{(HPT\_CTX6, }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{),}
            \AttributeTok{FRLF\_MINI =} \FunctionTok{mean}\NormalTok{(FRLF\_MINI, }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{),}
            \AttributeTok{.groups =} \StringTok{"drop"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{pivot\_longer}\NormalTok{(}\FunctionTok{c}\NormalTok{(HPT\_CTX6, FRLF\_MINI), }\AttributeTok{names\_to=}\StringTok{"scale"}\NormalTok{, }\AttributeTok{values\_to=}\StringTok{"mean"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =} \FunctionTok{reorder}\NormalTok{(class\_label, mean), }\AttributeTok{y =}\NormalTok{ mean)) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{facet\_wrap}\NormalTok{(scale }\SpecialCharTok{\textasciitilde{}}\NormalTok{ school\_id, }\AttributeTok{scales =} \StringTok{"free\_y"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{coord\_flip}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{x =} \StringTok{"Class (label within school)"}\NormalTok{, }\AttributeTok{y =} \StringTok{"Class mean"}\NormalTok{,}
       \AttributeTok{title =} \StringTok{"Class means within schools (HPT vs FR{-}LF)"}\NormalTok{)}

\NormalTok{p1}
\end{Highlighting}
\end{Shaded}

\begin{center}\includegraphics[width=0.95\linewidth]{/home/yetty/Projects/phd-029-hpt-and-extremism/outputs/02_descriptives-and-zero-order_files/figure-latex/group-plots-1} \end{center}

\begin{quote}
\textbf{Interpretation:} Visual check for unusually high/low classes can
inform later sensitivity checks (e.g., re-running models without extreme
classes).
\end{quote}

\hypertarget{reproducibility-appendix}{%
\subsection{9) Reproducibility
appendix}\label{reproducibility-appendix}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{sessionInfo}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## R version 4.4.2 (2024-10-31)
## Platform: x86_64-pc-linux-gnu
## Running under: Ubuntu 24.04.3 LTS
## 
## Matrix products: default
## BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.12.0 
## LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.12.0
## 
## locale:
##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
##  [3] LC_TIME=cs_CZ.UTF-8        LC_COLLATE=en_US.UTF-8    
##  [5] LC_MONETARY=cs_CZ.UTF-8    LC_MESSAGES=en_US.UTF-8   
##  [7] LC_PAPER=cs_CZ.UTF-8       LC_NAME=C                 
##  [9] LC_ADDRESS=C               LC_TELEPHONE=C            
## [11] LC_MEASUREMENT=cs_CZ.UTF-8 LC_IDENTIFICATION=C       
## 
## time zone: Europe/Prague
## tzcode source: system (glibc)
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] performance_0.15.1 lme4_1.1-38        Matrix_1.7-1       psych_2.4.12      
##  [5] scales_1.4.0       ggplot2_4.0.1      kableExtra_1.4.0   knitr_1.50        
##  [9] readxl_1.4.3       purrr_1.1.0        tidyr_1.3.1        stringr_1.5.1     
## [13] dplyr_1.1.4       
## 
## loaded via a namespace (and not attached):
##  [1] generics_0.1.3     xml2_1.3.6         stringi_1.8.4      lattice_0.22-5    
##  [5] digest_0.6.37      magrittr_2.0.3     evaluate_1.0.5     grid_4.4.2        
##  [9] RColorBrewer_1.1-3 fastmap_1.2.0      cellranger_1.1.0   viridisLite_0.4.2 
## [13] textshaping_0.4.1  reformulas_0.4.1   Rdpack_2.6.4       mnormt_2.1.1      
## [17] cli_3.6.5          rlang_1.1.6        rbibutils_2.3      splines_4.4.2     
## [21] withr_3.0.2        yaml_2.3.10        tools_4.4.2        parallel_4.4.2    
## [25] nloptr_2.2.1       minqa_1.2.8        boot_1.3-31        vctrs_0.6.5       
## [29] R6_2.6.1           lifecycle_1.0.4    MASS_7.3-61        insight_1.4.2     
## [33] pkgconfig_2.0.3    pillar_1.10.0      gtable_0.3.6       Rcpp_1.0.13-1     
## [37] glue_1.8.0         systemfonts_1.3.1  xfun_0.54          tibble_3.2.1      
## [41] tidyselect_1.2.1   rstudioapi_0.17.1  farver_2.1.2       htmltools_0.5.8.1 
## [45] nlme_3.1-166       labeling_0.4.3     rmarkdown_2.29     svglite_2.2.2     
## [49] compiler_4.4.2     S7_0.2.1
\end{verbatim}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{notes-interpretation-pointers}{%
\subsubsection{Notes \& interpretation
pointers}\label{notes-interpretation-pointers}}

\begin{itemize}
\tightlist
\item
  \textbf{HPT scales (1-4):} Higher indicates better
  contextualization/agent-sensitive reasoning---\textbf{after POP
  reversal}; we report CTX6 (primary) and TOT9 (with ROA) side-by-side.
\item
  \textbf{FR-LF mini (1-5):} Short right-wing authoritarian/Nazi
  relativization composite; higher = stronger endorsement. Use primarily
  as a predictor/covariate and for DIF checks later.
\item
  \textbf{Knowledge:} Treat as a covariate; it often shows small but
  non-zero links to HPT.
\item
  \textbf{SDR:} Use to check attenuation/amplification of sensitive
  attitudes.
\end{itemize}

\end{document}
