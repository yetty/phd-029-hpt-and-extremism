% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
  10pt,
]{article}
\usepackage{amsmath,amssymb}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math} % this also loads fontspec
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
\usepackage{lmodern}
\ifPDFTeX\else
  % xetex/luatex font selection
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\usepackage[landscape,margin=0.7in]{geometry}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
\usepackage{multirow}
\usepackage{float}
\usepackage{colortbl}
\usepackage{pdflscape}
\usepackage{threeparttable}
\usepackage{threeparttablex}
\usepackage[normalem]{ulem}
\usepackage{makecell}
\setlength{\LTcapwidth}{\textwidth}
\usepackage{booktabs}
\usepackage{caption}
\usepackage{longtable}
\usepackage{colortbl}
\usepackage{array}
\usepackage{anyfontsize}
\usepackage{multirow}
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same}
\hypersetup{
  pdftitle={Sensitivity analyses --- HPT (Czech data)},
  pdfauthor={HPT and Extremism project},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}

\title{Sensitivity analyses --- HPT (Czech data)}
\usepackage{etoolbox}
\makeatletter
\providecommand{\subtitle}[1]{% add subtitle to \maketitle
  \apptocmd{\@title}{\par {\large #1 \par}}{}{}
}
\makeatother
\subtitle{Robustness checks for scoring, ideology operationalisation,
exclusions, and random-slopes}
\author{HPT and Extremism project}
\date{2025-12-13}

\begin{document}
\maketitle

{
\setcounter{tocdepth}{3}
\tableofcontents
}
\hypertarget{purpose-and-scope}{%
\section{Purpose and scope}\label{purpose-and-scope}}

This file documents \textbf{exploratory robustness checks} of our main
results. We vary how HPT is scored, how ideology is operationalised,
which observations are included, and whether class-level \textbf{random
slopes} are needed. The goal is to see if substantive conclusions
survive reasonable perturbations---\textbf{not} to hunt for
significance.

HPT scoring follows the Hartmann--Hasselhorn / Huijgen instrument logic;
note earlier reports that ROA items can behave inconsistently across
samples, motivating ROA-free alternatives here. We also leverage the
FR-LF dimensions RD and NS for ideology variants. All results explicitly
use \textbf{reversed POP items} so that higher scores mean \textbf{more
contextualised/agent-aware} reasoning.

\hypertarget{setup}{%
\subsection{Setup}\label{setup}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Core packages}
\FunctionTok{library}\NormalTok{(tidyverse)}
\FunctionTok{library}\NormalTok{(lme4)}
\FunctionTok{library}\NormalTok{(lmerTest)}
\FunctionTok{library}\NormalTok{(broom)}
\FunctionTok{library}\NormalTok{(broom.mixed)}
\FunctionTok{library}\NormalTok{(performance)}
\FunctionTok{library}\NormalTok{(glue)}
\FunctionTok{library}\NormalTok{(gt)}

\CommentTok{\# Nice printing}
\FunctionTok{theme\_set}\NormalTok{(}\FunctionTok{theme\_bw}\NormalTok{())}
\end{Highlighting}
\end{Shaded}

\hypertarget{data}{%
\subsection{Data}\label{data}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Load the dataset created in 00\_data{-}preparation}
\FunctionTok{load}\NormalTok{(}\StringTok{"normalised\_responses.RData"}\NormalTok{)}
\FunctionTok{stopifnot}\NormalTok{(}\FunctionTok{exists}\NormalTok{(}\StringTok{"normalised\_responses"}\NormalTok{))}
\NormalTok{dat\_raw }\OtherTok{\textless{}{-}}\NormalTok{ normalised\_responses}

\CommentTok{\# Cluster identifiers}
\NormalTok{dat\_raw }\OtherTok{\textless{}{-}}\NormalTok{ dat\_raw }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}
    \AttributeTok{school\_id   =} \FunctionTok{as.factor}\NormalTok{(school\_id),}
    \AttributeTok{class\_label =} \FunctionTok{as.factor}\NormalTok{(class\_label),}
    \AttributeTok{class\_id    =} \FunctionTok{interaction}\NormalTok{(school\_id, class\_label, }\AttributeTok{drop =} \ConstantTok{TRUE}\NormalTok{)}
\NormalTok{  )}

\CommentTok{\# Reverse POP (1{-}4) so higher = more contextualised}
\NormalTok{POP\_rev\_items }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(}\StringTok{"POP"}\NormalTok{, }\DecValTok{1}\SpecialCharTok{:}\DecValTok{3}\NormalTok{)}
\NormalTok{dat\_raw }\OtherTok{\textless{}{-}}\NormalTok{ dat\_raw }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\FunctionTok{across}\NormalTok{(}\FunctionTok{all\_of}\NormalTok{(POP\_rev\_items), }\SpecialCharTok{\textasciitilde{}} \DecValTok{5} \SpecialCharTok{{-}} \FunctionTok{as.numeric}\NormalTok{(.), }\AttributeTok{.names =} \StringTok{"\{.col\}\_rev"}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}
    \AttributeTok{HPT\_POP\_rev =} \FunctionTok{rowMeans}\NormalTok{(}\FunctionTok{across}\NormalTok{(}\FunctionTok{paste0}\NormalTok{(POP\_rev\_items, }\StringTok{"\_rev"}\NormalTok{)), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{),}
    \AttributeTok{HPT\_CONT    =} \FunctionTok{rowMeans}\NormalTok{(}\FunctionTok{across}\NormalTok{(CONT1}\SpecialCharTok{:}\NormalTok{CONT3), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{),}
    \AttributeTok{HPT\_ROA     =} \FunctionTok{rowMeans}\NormalTok{(}\FunctionTok{across}\NormalTok{(ROA1}\SpecialCharTok{:}\NormalTok{ROA3),   }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{),}
    \CommentTok{\# Canonical composites}
    \AttributeTok{HPT\_CTX6    =} \FunctionTok{rowMeans}\NormalTok{(}\FunctionTok{cbind}\NormalTok{(HPT\_POP\_rev, HPT\_CONT), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{),}
    \AttributeTok{HPT\_TOT9    =} \FunctionTok{rowMeans}\NormalTok{(}\FunctionTok{cbind}\NormalTok{(HPT\_POP\_rev, HPT\_CONT, HPT\_ROA), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\NormalTok{  )}
\end{Highlighting}
\end{Shaded}

\textbf{Variable dictionary.} KN, POP/ROA/CONT, RD/NS, KSA facets, SDR
as per codebook.

\hypertarget{scoring-variants-for-hpt-with-pop-reversed}{%
\section{1. Scoring variants for HPT (with POP
reversed)}\label{scoring-variants-for-hpt-with-pop-reversed}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# IMPORTANT: use reversed POP columns in all totals}

\NormalTok{dat }\OtherTok{\textless{}{-}}\NormalTok{ dat\_raw }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}
    \AttributeTok{HPT\_total\_9 =} \FunctionTok{rowMeans}\NormalTok{(}\FunctionTok{across}\NormalTok{(}\FunctionTok{c}\NormalTok{(}\FunctionTok{paste0}\NormalTok{(}\StringTok{"POP"}\NormalTok{,}\DecValTok{1}\SpecialCharTok{:}\DecValTok{3}\NormalTok{, }\StringTok{"\_rev"}\NormalTok{), ROA1}\SpecialCharTok{:}\NormalTok{ROA3, CONT1}\SpecialCharTok{:}\NormalTok{CONT3)), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{),}
    \AttributeTok{HPT\_total\_8 =} \FunctionTok{rowMeans}\NormalTok{(}\FunctionTok{across}\NormalTok{(}\FunctionTok{c}\NormalTok{(}\FunctionTok{paste0}\NormalTok{(}\StringTok{"POP"}\NormalTok{,}\DecValTok{1}\SpecialCharTok{:}\DecValTok{3}\NormalTok{, }\StringTok{"\_rev"}\NormalTok{), ROA2}\SpecialCharTok{:}\NormalTok{ROA3, CONT1}\SpecialCharTok{:}\NormalTok{CONT3)), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), }\CommentTok{\# drop ROA1}
    \AttributeTok{HPT\_total\_6 =} \FunctionTok{rowMeans}\NormalTok{(}\FunctionTok{across}\NormalTok{(}\FunctionTok{c}\NormalTok{(}\FunctionTok{paste0}\NormalTok{(}\StringTok{"POP"}\NormalTok{,}\DecValTok{1}\SpecialCharTok{:}\DecValTok{3}\NormalTok{, }\StringTok{"\_rev"}\NormalTok{), CONT1}\SpecialCharTok{:}\NormalTok{CONT3)), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)             }\CommentTok{\# no ROA}
\NormalTok{  )}

\CommentTok{\# Means \& SDs so the reader sees scale location and spread}
\NormalTok{hpt\_desc }\OtherTok{\textless{}{-}}\NormalTok{ dat }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{summarise}\NormalTok{(}
    \StringTok{\textasciigrave{}}\AttributeTok{9{-}item (POP\_rev + ROA + CONT)}\StringTok{\textasciigrave{}} \SpecialCharTok{:=} \FunctionTok{mean}\NormalTok{(HPT\_total\_9,  }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{),}
    \StringTok{\textasciigrave{}}\AttributeTok{8{-}item (drop ROA1)}\StringTok{\textasciigrave{}}            \SpecialCharTok{:=} \FunctionTok{mean}\NormalTok{(HPT\_total\_8,  }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{),}
    \StringTok{\textasciigrave{}}\AttributeTok{6{-}item (no ROA)}\StringTok{\textasciigrave{}}               \SpecialCharTok{:=} \FunctionTok{mean}\NormalTok{(HPT\_total\_6,  }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{),}
    \AttributeTok{.groups =} \StringTok{"drop"}
\NormalTok{  ) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{pivot\_longer}\NormalTok{(}\FunctionTok{everything}\NormalTok{(), }\AttributeTok{names\_to =} \StringTok{"Score"}\NormalTok{, }\AttributeTok{values\_to =} \StringTok{"Mean"}\NormalTok{)}

\NormalTok{hpt\_sd }\OtherTok{\textless{}{-}}\NormalTok{ dat }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{summarise}\NormalTok{(}
    \StringTok{\textasciigrave{}}\AttributeTok{9{-}item (POP\_rev + ROA + CONT)}\StringTok{\textasciigrave{}} \SpecialCharTok{:=} \FunctionTok{sd}\NormalTok{(HPT\_total\_9,  }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{),}
    \StringTok{\textasciigrave{}}\AttributeTok{8{-}item (drop ROA1)}\StringTok{\textasciigrave{}}            \SpecialCharTok{:=} \FunctionTok{sd}\NormalTok{(HPT\_total\_8,  }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{),}
    \StringTok{\textasciigrave{}}\AttributeTok{6{-}item (no ROA)}\StringTok{\textasciigrave{}}               \SpecialCharTok{:=} \FunctionTok{sd}\NormalTok{(HPT\_total\_6,  }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{)}
\NormalTok{  ) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{pivot\_longer}\NormalTok{(}\FunctionTok{everything}\NormalTok{(), }\AttributeTok{names\_to =} \StringTok{"Score"}\NormalTok{, }\AttributeTok{values\_to =} \StringTok{"SD"}\NormalTok{)}

\NormalTok{hpt\_desc\_tbl }\OtherTok{\textless{}{-}} \FunctionTok{left\_join}\NormalTok{(hpt\_desc, hpt\_sd, }\AttributeTok{by =} \StringTok{"Score"}\NormalTok{)}

\NormalTok{hpt\_desc\_tbl }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{gt}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{fmt\_number}\NormalTok{(}\AttributeTok{columns =} \FunctionTok{c}\NormalTok{(Mean, SD), }\AttributeTok{decimals =} \DecValTok{2}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{tab\_header}\NormalTok{(}\AttributeTok{title =} \StringTok{"HPT scoring variants (POP reversed): means and SDs"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{table}[t]
\caption*{
{\fontsize{20}{25}\selectfont  HPT scoring variants (POP reversed): means and SDs\fontsize{12}{15}\selectfont }
} 
\fontsize{12.0pt}{14.0pt}\selectfont
\begin{tabular*}{\linewidth}{@{\extracolsep{\fill}}lrr}
\toprule
Score & Mean & SD \\ 
\midrule\addlinespace[2.5pt]
9-item (POP\_rev + ROA + CONT) & 2.84 & 0.49 \\ 
8-item (drop ROA1) & 2.84 & 0.50 \\ 
6-item (no ROA) & 2.86 & 0.57 \\ 
\bottomrule
\end{tabular*}
\end{table}

\hypertarget{ideology-operationalisations}{%
\section{2. Ideology
operationalisations}\label{ideology-operationalisations}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dat }\OtherTok{\textless{}{-}}\NormalTok{ dat }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}
    \AttributeTok{KN\_total   =} \FunctionTok{rowSums}\NormalTok{(}\FunctionTok{across}\NormalTok{(KN1}\SpecialCharTok{:}\NormalTok{KN6), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{),}
    \AttributeTok{SDR\_total  =} \FunctionTok{rowSums}\NormalTok{(}\FunctionTok{across}\NormalTok{(}\FunctionTok{starts\_with}\NormalTok{(}\StringTok{"SDR"}\NormalTok{)), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{),}
    \AttributeTok{NS\_sum     =} \FunctionTok{rowSums}\NormalTok{(}\FunctionTok{across}\NormalTok{(NS1}\SpecialCharTok{:}\NormalTok{NS3), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{),}
    \AttributeTok{RD\_sum     =} \FunctionTok{rowSums}\NormalTok{(}\FunctionTok{across}\NormalTok{(RD1}\SpecialCharTok{:}\NormalTok{RD3), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{),}
    \AttributeTok{FRLF\_mini  =}\NormalTok{ NS\_sum }\SpecialCharTok{+}\NormalTok{ RD\_sum,}
    \AttributeTok{KSA\_A      =} \FunctionTok{rowSums}\NormalTok{(}\FunctionTok{across}\NormalTok{(A1}\SpecialCharTok{:}\NormalTok{A3), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{),}
    \AttributeTok{KSA\_U      =} \FunctionTok{rowSums}\NormalTok{(}\FunctionTok{across}\NormalTok{(U1}\SpecialCharTok{:}\NormalTok{U3), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{),}
    \AttributeTok{KSA\_K      =} \FunctionTok{rowSums}\NormalTok{(}\FunctionTok{across}\NormalTok{(K1}\SpecialCharTok{:}\NormalTok{K3), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{),}
    \AttributeTok{KSA\_total  =}\NormalTok{ KSA\_A }\SpecialCharTok{+}\NormalTok{ KSA\_U }\SpecialCharTok{+}\NormalTok{ KSA\_K}
\NormalTok{  ) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\FunctionTok{across}\NormalTok{(}\FunctionTok{c}\NormalTok{(NS\_sum, RD\_sum, FRLF\_mini, KSA\_total, KN\_total, SDR\_total), scale, }\AttributeTok{.names =} \StringTok{"\{.col\}\_z"}\NormalTok{))}

\CommentTok{\# Show quick reliables for predictors (descriptive only)}
\NormalTok{ideo\_desc }\OtherTok{\textless{}{-}}\NormalTok{ dat }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{summarise}\NormalTok{(}
  \AttributeTok{KN\_mean =} \FunctionTok{mean}\NormalTok{(KN\_total, }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{), }\AttributeTok{KN\_sd =} \FunctionTok{sd}\NormalTok{(KN\_total, }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{),}
  \AttributeTok{SDR\_mean =} \FunctionTok{mean}\NormalTok{(SDR\_total, }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{), }\AttributeTok{SDR\_sd =} \FunctionTok{sd}\NormalTok{(SDR\_total, }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{),}
  \AttributeTok{NS\_mean =} \FunctionTok{mean}\NormalTok{(NS\_sum, }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{), }\AttributeTok{NS\_sd =} \FunctionTok{sd}\NormalTok{(NS\_sum, }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{),}
  \AttributeTok{RD\_mean =} \FunctionTok{mean}\NormalTok{(RD\_sum, }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{), }\AttributeTok{RD\_sd =} \FunctionTok{sd}\NormalTok{(RD\_sum, }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{),}
  \AttributeTok{KSA\_mean =} \FunctionTok{mean}\NormalTok{(KSA\_total, }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{), }\AttributeTok{KSA\_sd =} \FunctionTok{sd}\NormalTok{(KSA\_total, }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{)}
\NormalTok{)}
\NormalTok{ideo\_desc }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{gt}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{tab\_header}\NormalTok{(}\AttributeTok{title =} \StringTok{"Predictor summaries (raw scale units)"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{table}[t]
\caption*{
{\fontsize{20}{25}\selectfont  Predictor summaries (raw scale units)\fontsize{12}{15}\selectfont }
} 
\fontsize{12.0pt}{14.0pt}\selectfont
\begin{tabular*}{\linewidth}{@{\extracolsep{\fill}}rrrrrrrrrr}
\toprule
KN\_mean & KN\_sd & SDR\_mean & SDR\_sd & NS\_mean & NS\_sd & RD\_mean & RD\_sd & KSA\_mean & KSA\_sd \\ 
\midrule\addlinespace[2.5pt]
3.153846 & 1.657939 & 14.61111 & 3.828743 & 7.136752 & 2.923652 & 7.34188 & 2.939044 & 25.13248 & 6.821102 \\ 
\bottomrule
\end{tabular*}
\end{table}

\hypertarget{exclusions-knowledge-outliers-extreme-sdr}{%
\section{3. Exclusions: knowledge outliers \& extreme
SDR}\label{exclusions-knowledge-outliers-extreme-sdr}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Tukey fence for KN; top 10\% for SDR}
\NormalTok{kn\_q }\OtherTok{\textless{}{-}} \FunctionTok{quantile}\NormalTok{(dat}\SpecialCharTok{$}\NormalTok{KN\_total, }\AttributeTok{probs =} \FunctionTok{c}\NormalTok{(.}\DecValTok{25}\NormalTok{, .}\DecValTok{75}\NormalTok{), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\NormalTok{kn\_iqr }\OtherTok{\textless{}{-}}\NormalTok{ kn\_q[}\DecValTok{2}\NormalTok{]}\SpecialCharTok{{-}}\NormalTok{kn\_q[}\DecValTok{1}\NormalTok{]}
\NormalTok{kn\_low }\OtherTok{\textless{}{-}}\NormalTok{ kn\_q[}\DecValTok{1}\NormalTok{] }\SpecialCharTok{{-}} \FloatTok{1.5}\SpecialCharTok{*}\NormalTok{kn\_iqr}
\NormalTok{kn\_high}\OtherTok{\textless{}{-}}\NormalTok{ kn\_q[}\DecValTok{2}\NormalTok{] }\SpecialCharTok{+} \FloatTok{1.5}\SpecialCharTok{*}\NormalTok{kn\_iqr}

\NormalTok{sdr\_p90 }\OtherTok{\textless{}{-}} \FunctionTok{quantile}\NormalTok{(dat}\SpecialCharTok{$}\NormalTok{SDR\_total, }\AttributeTok{probs =}\NormalTok{ .}\DecValTok{90}\NormalTok{, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}

\NormalTok{dat }\OtherTok{\textless{}{-}}\NormalTok{ dat }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}
    \AttributeTok{excl\_KN  =}\NormalTok{ KN\_total }\SpecialCharTok{\textless{}}\NormalTok{ kn\_low }\SpecialCharTok{|}\NormalTok{ KN\_total }\SpecialCharTok{\textgreater{}}\NormalTok{ kn\_high,}
    \AttributeTok{excl\_SDR =}\NormalTok{ SDR\_total }\SpecialCharTok{\textgreater{}=}\NormalTok{ sdr\_p90,}
    \AttributeTok{keep\_all =} \ConstantTok{TRUE}\NormalTok{,}
    \AttributeTok{keep\_excl=} \SpecialCharTok{!}\NormalTok{(excl\_KN }\SpecialCharTok{|}\NormalTok{ excl\_SDR)}
\NormalTok{  )}

\NormalTok{excl\_tbl }\OtherTok{\textless{}{-}} \FunctionTok{tibble}\NormalTok{(}
  \AttributeTok{Criterion =} \FunctionTok{c}\NormalTok{(}\StringTok{"Total N"}\NormalTok{, }\StringTok{"Drop KN outliers"}\NormalTok{, }\StringTok{"Drop top{-}10\% SDR"}\NormalTok{, }\StringTok{"Kept (both rules)"}\NormalTok{),}
  \AttributeTok{N =} \FunctionTok{c}\NormalTok{(}\FunctionTok{nrow}\NormalTok{(dat), }\FunctionTok{sum}\NormalTok{(dat}\SpecialCharTok{$}\NormalTok{excl\_KN, }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{), }\FunctionTok{sum}\NormalTok{(dat}\SpecialCharTok{$}\NormalTok{excl\_SDR, }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{), }\FunctionTok{sum}\NormalTok{(dat}\SpecialCharTok{$}\NormalTok{keep\_excl, }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{))}
\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{Percent =}\NormalTok{ scales}\SpecialCharTok{::}\FunctionTok{percent}\NormalTok{(N }\SpecialCharTok{/} \FunctionTok{first}\NormalTok{(N)))}

\NormalTok{excl\_tbl }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{gt}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{tab\_header}\NormalTok{(}\AttributeTok{title =} \StringTok{"Exclusion counts and percentages"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{table}[t]
\caption*{
{\fontsize{20}{25}\selectfont  Exclusion counts and percentages\fontsize{12}{15}\selectfont }
} 
\fontsize{12.0pt}{14.0pt}\selectfont
\begin{tabular*}{\linewidth}{@{\extracolsep{\fill}}lrr}
\toprule
Criterion & N & Percent \\ 
\midrule\addlinespace[2.5pt]
Total N & 234 & 100\% \\ 
Drop KN outliers & 0 & 0\% \\ 
Drop top-10\% SDR & 25 & 11\% \\ 
Kept (both rules) & 209 & 89\% \\ 
\bottomrule
\end{tabular*}
\end{table}

\hypertarget{mixed-models-with-clustering-random-slopes}{%
\section{4. Mixed models with clustering \& random
slopes}\label{mixed-models-with-clustering-random-slopes}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit\_models }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(data, hpt\_var, ideol\_var)\{}
\NormalTok{  form0 }\OtherTok{\textless{}{-}} \FunctionTok{as.formula}\NormalTok{(}\FunctionTok{glue}\NormalTok{(}
    \StringTok{"\{hpt\_var\} \textasciitilde{} \{ideol\_var\} + KN\_total\_z + SDR\_total\_z + (1 | school\_id) + (1 | class\_id)"}
\NormalTok{  ))}
\NormalTok{  form1 }\OtherTok{\textless{}{-}} \FunctionTok{as.formula}\NormalTok{(}\FunctionTok{glue}\NormalTok{(}
    \StringTok{"\{hpt\_var\} \textasciitilde{} \{ideol\_var\} + KN\_total\_z + SDR\_total\_z + (1 | school\_id) + (1 + \{ideol\_var\} | class\_id)"}
\NormalTok{  ))}
\NormalTok{  m0 }\OtherTok{\textless{}{-}} \FunctionTok{lmer}\NormalTok{(form0, }\AttributeTok{data =}\NormalTok{ data)}
\NormalTok{  m1 }\OtherTok{\textless{}{-}} \FunctionTok{try}\NormalTok{(}\FunctionTok{lmer}\NormalTok{(form1, }\AttributeTok{data =}\NormalTok{ data), }\AttributeTok{silent =} \ConstantTok{TRUE}\NormalTok{)}
  \ControlFlowTok{if}\NormalTok{ (}\FunctionTok{inherits}\NormalTok{(m1, }\StringTok{"try{-}error"}\NormalTok{) }\SpecialCharTok{||} \FunctionTok{isTRUE}\NormalTok{(}\FunctionTok{isSingular}\NormalTok{(m1))) m1 }\OtherTok{\textless{}{-}} \ConstantTok{NULL}
  \FunctionTok{list}\NormalTok{(}\AttributeTok{m0 =}\NormalTok{ m0, }\AttributeTok{m1 =}\NormalTok{ m1)}
\NormalTok{\}}

\NormalTok{summarise\_model }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(m)\{}
\NormalTok{  fx }\OtherTok{\textless{}{-}}\NormalTok{ broom.mixed}\SpecialCharTok{::}\FunctionTok{tidy}\NormalTok{(m, }\AttributeTok{effects =} \StringTok{"fixed"}\NormalTok{, }\AttributeTok{conf.int =} \ConstantTok{TRUE}\NormalTok{)}
\NormalTok{  r2 }\OtherTok{\textless{}{-}}\NormalTok{ performance}\SpecialCharTok{::}\FunctionTok{r2\_nakagawa}\NormalTok{(m)}
\NormalTok{  fx }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{mutate}\NormalTok{(}\AttributeTok{R2\_marg =}\NormalTok{ r2}\SpecialCharTok{$}\NormalTok{R2\_marginal, }\AttributeTok{R2\_cond =}\NormalTok{ r2}\SpecialCharTok{$}\NormalTok{R2\_conditional)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hpt\_vars   }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"HPT\_total\_9"}\NormalTok{,}\StringTok{"HPT\_total\_8"}\NormalTok{,}\StringTok{"HPT\_total\_6"}\NormalTok{)}
\NormalTok{ideol\_vars }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"NS\_sum\_z"}\NormalTok{,}\StringTok{"FRLF\_mini\_z"}\NormalTok{,}\StringTok{"KSA\_total\_z"}\NormalTok{)}

\CommentTok{\# Full sample}
\NormalTok{full\_grid }\OtherTok{\textless{}{-}}\NormalTok{ tidyr}\SpecialCharTok{::}\FunctionTok{expand\_grid}\NormalTok{(}\AttributeTok{hpt =}\NormalTok{ hpt\_vars, }\AttributeTok{ideol =}\NormalTok{ ideol\_vars) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{fits =} \FunctionTok{map2}\NormalTok{(hpt, ideol, }\SpecialCharTok{\textasciitilde{}}\FunctionTok{fit\_models}\NormalTok{(dat }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(keep\_all), .x, .y)),}
         \AttributeTok{m0   =} \FunctionTok{map}\NormalTok{(fits, }\StringTok{"m0"}\NormalTok{),}
         \AttributeTok{m1   =} \FunctionTok{map}\NormalTok{(fits, }\StringTok{"m1"}\NormalTok{))}

\CommentTok{\# Exclusion sample}
\NormalTok{excl\_grid }\OtherTok{\textless{}{-}}\NormalTok{ tidyr}\SpecialCharTok{::}\FunctionTok{expand\_grid}\NormalTok{(}\AttributeTok{hpt =}\NormalTok{ hpt\_vars, }\AttributeTok{ideol =}\NormalTok{ ideol\_vars) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{fits =} \FunctionTok{map2}\NormalTok{(hpt, ideol, }\SpecialCharTok{\textasciitilde{}}\FunctionTok{fit\_models}\NormalTok{(dat }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(keep\_excl), .x, .y)),}
         \AttributeTok{m0   =} \FunctionTok{map}\NormalTok{(fits, }\StringTok{"m0"}\NormalTok{),}
         \AttributeTok{m1   =} \FunctionTok{map}\NormalTok{(fits, }\StringTok{"m1"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{collect\_table }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(grid, label)\{}
\NormalTok{  out0 }\OtherTok{\textless{}{-}}\NormalTok{ grid }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{mutate}\NormalTok{(}\AttributeTok{t0 =} \FunctionTok{map}\NormalTok{(m0, summarise\_model)) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{unnest}\NormalTok{(t0) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{mutate}\NormalTok{(}\AttributeTok{model =} \StringTok{"RI"}\NormalTok{)}
\NormalTok{  out1 }\OtherTok{\textless{}{-}}\NormalTok{ grid }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{map\_lgl}\NormalTok{(m1, is.null)) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{mutate}\NormalTok{(}\AttributeTok{t1 =} \FunctionTok{map}\NormalTok{(m1, summarise\_model)) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{unnest}\NormalTok{(t1) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{mutate}\NormalTok{(}\AttributeTok{model =} \StringTok{"RS"}\NormalTok{)}
  \FunctionTok{bind\_rows}\NormalTok{(out0, out1) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{mutate}\NormalTok{(}\AttributeTok{sample =}\NormalTok{ label)}
\NormalTok{\}}

\NormalTok{tab\_full }\OtherTok{\textless{}{-}} \FunctionTok{collect\_table}\NormalTok{(full\_grid, }\StringTok{"Full"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Random effect variances not available. Returned R2 does not account for random effects.
## Random effect variances not available. Returned R2 does not account for random effects.
## Random effect variances not available. Returned R2 does not account for random effects.
## Random effect variances not available. Returned R2 does not account for random effects.
## Random effect variances not available. Returned R2 does not account for random effects.
## Random effect variances not available. Returned R2 does not account for random effects.
## Random effect variances not available. Returned R2 does not account for random effects.
## Random effect variances not available. Returned R2 does not account for random effects.
## Random effect variances not available. Returned R2 does not account for random effects.
\end{verbatim}

\begin{verbatim}
## Warning: There were 9 warnings in `mutate()`.
## The first warning was:
## i In argument: `t0 = map(m0, summarise_model)`.
## Caused by warning:
## ! Can't compute random effect variances. Some variance components equal
##   zero. Your model may suffer from singularity (see `?lme4::isSingular`
##   and `?performance::check_singularity`).
##   Decrease the `tolerance` level to force the calculation of random effect
##   variances, or impose priors on your random effects parameters (using
##   packages like `brms` or `glmmTMB`).
## i Run `dplyr::last_dplyr_warnings()` to see the 8 remaining warnings.
\end{verbatim}

\begin{verbatim}
## Random effect variances not available. Returned R2 does not account for random effects.
\end{verbatim}

\begin{verbatim}
## Warning: There was 1 warning in `mutate()`.
## i In argument: `t1 = map(m1, summarise_model)`.
## Caused by warning:
## ! Can't compute random effect variances. Some variance components equal
##   zero. Your model may suffer from singularity (see `?lme4::isSingular`
##   and `?performance::check_singularity`).
##   Decrease the `tolerance` level to force the calculation of random effect
##   variances, or impose priors on your random effects parameters (using
##   packages like `brms` or `glmmTMB`).
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{tab\_excl }\OtherTok{\textless{}{-}} \FunctionTok{collect\_table}\NormalTok{(excl\_grid, }\StringTok{"Exclusions applied"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Random effect variances not available. Returned R2 does not account for random effects.
## Random effect variances not available. Returned R2 does not account for random effects.
## Random effect variances not available. Returned R2 does not account for random effects.
## Random effect variances not available. Returned R2 does not account for random effects.
## Random effect variances not available. Returned R2 does not account for random effects.
## Random effect variances not available. Returned R2 does not account for random effects.
## Random effect variances not available. Returned R2 does not account for random effects.
## Random effect variances not available. Returned R2 does not account for random effects.
## Random effect variances not available. Returned R2 does not account for random effects.
\end{verbatim}

\begin{verbatim}
## Warning: There were 9 warnings in `mutate()`.
## The first warning was:
## i In argument: `t0 = map(m0, summarise_model)`.
## Caused by warning:
## ! Can't compute random effect variances. Some variance components equal
##   zero. Your model may suffer from singularity (see `?lme4::isSingular`
##   and `?performance::check_singularity`).
##   Decrease the `tolerance` level to force the calculation of random effect
##   variances, or impose priors on your random effects parameters (using
##   packages like `brms` or `glmmTMB`).
## i Run `dplyr::last_dplyr_warnings()` to see the 8 remaining warnings.
\end{verbatim}

\begin{verbatim}
## Random effect variances not available. Returned R2 does not account for random effects.
## Random effect variances not available. Returned R2 does not account for random effects.
## Random effect variances not available. Returned R2 does not account for random effects.
\end{verbatim}

\begin{verbatim}
## Warning: There were 3 warnings in `mutate()`.
## The first warning was:
## i In argument: `t1 = map(m1, summarise_model)`.
## Caused by warning:
## ! Can't compute random effect variances. Some variance components equal
##   zero. Your model may suffer from singularity (see `?lme4::isSingular`
##   and `?performance::check_singularity`).
##   Decrease the `tolerance` level to force the calculation of random effect
##   variances, or impose priors on your random effects parameters (using
##   packages like `brms` or `glmmTMB`).
## i Run `dplyr::last_dplyr_warnings()` to see the 2 remaining warnings.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Keep only ideology terms + intercept}
\NormalTok{tab\_models }\OtherTok{\textless{}{-}} \FunctionTok{bind\_rows}\NormalTok{(tab\_full, tab\_excl) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{filter}\NormalTok{(term }\SpecialCharTok{\%in\%} \FunctionTok{c}\NormalTok{(}\StringTok{"(Intercept)"}\NormalTok{, }\StringTok{"NS\_sum\_z"}\NormalTok{, }\StringTok{"FRLF\_mini\_z"}\NormalTok{, }\StringTok{"KSA\_total\_z"}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}
    \AttributeTok{ideol =} \FunctionTok{recode}\NormalTok{(term, }\AttributeTok{NS\_sum\_z =} \StringTok{"NS (z)"}\NormalTok{, }\AttributeTok{FRLF\_mini\_z =} \StringTok{"FR{-}LF: RD+NS (z)"}\NormalTok{, }\AttributeTok{KSA\_total\_z =} \StringTok{"KSA{-}3 total (z)"}\NormalTok{, }\StringTok{\textasciigrave{}}\AttributeTok{(Intercept)}\StringTok{\textasciigrave{}} \OtherTok{=} \StringTok{"(Intercept)"}\NormalTok{),}
    \AttributeTok{hpt =} \FunctionTok{recode}\NormalTok{(hpt,}
      \AttributeTok{HPT\_total\_9 =} \StringTok{"HPT 9{-}item (POP\_rev + ROA + CONT)"}\NormalTok{,}
      \AttributeTok{HPT\_total\_8 =} \StringTok{"HPT 8{-}item (drop ROA1)"}\NormalTok{,}
      \AttributeTok{HPT\_total\_6 =} \StringTok{"HPT 6{-}item (no ROA)"}
\NormalTok{    )}
\NormalTok{  ) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{select}\NormalTok{(sample, hpt, model, ideol, estimate, conf.low, conf.high, p.value, R2\_marg, R2\_cond) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{arrange}\NormalTok{(sample, hpt, ideol, model)}

\CommentTok{\# Display as a compact table}
\NormalTok{(tab\_models }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\FunctionTok{across}\NormalTok{(}\FunctionTok{c}\NormalTok{(estimate, conf.low, conf.high, R2\_marg, R2\_cond), }\SpecialCharTok{\textasciitilde{}}\FunctionTok{round}\NormalTok{(., }\DecValTok{3}\NormalTok{)),}
         \AttributeTok{p.value =} \FunctionTok{signif}\NormalTok{(p.value, }\DecValTok{3}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{gt}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{tab\_header}\NormalTok{(}\AttributeTok{title =} \StringTok{"Multilevel models: ideology → HPT (POP reversed; controls: KN, SDR; school + class clustering)"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{tab\_spanner}\NormalTok{(}\AttributeTok{label =} \StringTok{"Effect (β and 95\% CI)"}\NormalTok{, }\AttributeTok{columns =} \FunctionTok{c}\NormalTok{(estimate, conf.low, conf.high)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{cols\_label}\NormalTok{(}\AttributeTok{sample=}\StringTok{"Sample"}\NormalTok{, }\AttributeTok{hpt=}\StringTok{"HPT score"}\NormalTok{, }\AttributeTok{model=}\StringTok{"Model"}\NormalTok{, }\AttributeTok{ideol=}\StringTok{"Predictor"}\NormalTok{,}
             \AttributeTok{estimate=}\StringTok{"β"}\NormalTok{, }\AttributeTok{conf.low=}\StringTok{"CI low"}\NormalTok{, }\AttributeTok{conf.high=}\StringTok{"CI high"}\NormalTok{, }\AttributeTok{p.value=}\StringTok{"p"}\NormalTok{,}
             \AttributeTok{R2\_marg=}\StringTok{"R² (marg.)"}\NormalTok{, }\AttributeTok{R2\_cond=}\StringTok{"R² (cond.)"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{table}[t]
\caption*{
{\fontsize{20}{25}\selectfont  Multilevel models: ideology \textrightarrow HPT (POP reversed; controls: KN, SDR; school + class clustering)\fontsize{12}{15}\selectfont }
} 
\fontsize{12.0pt}{14.0pt}\selectfont
\begin{tabular*}{\linewidth}{@{\extracolsep{\fill}}llllrrrrrr}
\toprule
 &  &  &  & \multicolumn{3}{c}{Effect (\ensuremath{\beta} and 95\% CI)} &  &  &  \\ 
\cmidrule(lr){5-7}
Sample & HPT score & Model & Predictor & \ensuremath{\beta} & CI low & CI high & p & R\texttwosuperior (marg.) & R\texttwosuperior (cond.) \\ 
\midrule\addlinespace[2.5pt]
Exclusions applied & HPT 6-item (no ROA) & RI & (Intercept) & 2.840 & 2.688 & 2.991 & 1.47e-07 & 0.106 & NA \\ 
Exclusions applied & HPT 6-item (no ROA) & RI & (Intercept) & 2.840 & 2.691 & 2.990 & 1.69e-07 & 0.105 & NA \\ 
Exclusions applied & HPT 6-item (no ROA) & RI & (Intercept) & 2.842 & 2.694 & 2.989 & 1.18e-07 & 0.108 & NA \\ 
Exclusions applied & HPT 6-item (no ROA) & RS & (Intercept) & 2.835 & 2.682 & 2.989 & 9.91e-08 & 0.108 & NA \\ 
Exclusions applied & HPT 6-item (no ROA) & RS & (Intercept) & 2.824 & 2.666 & 2.982 & 9.66e-08 & 0.105 & NA \\ 
Exclusions applied & HPT 6-item (no ROA) & RI & FR-LF: RD+NS (z) & -0.002 & -0.083 & 0.079 & 9.60e-01 & 0.105 & NA \\ 
Exclusions applied & HPT 6-item (no ROA) & RS & FR-LF: RD+NS (z) & -0.002 & -0.129 & 0.125 & 9.76e-01 & 0.105 & NA \\ 
Exclusions applied & HPT 6-item (no ROA) & RI & KSA-3 total (z) & -0.033 & -0.118 & 0.052 & 4.44e-01 & 0.108 & NA \\ 
Exclusions applied & HPT 6-item (no ROA) & RI & NS (z) & 0.027 & -0.054 & 0.107 & 5.16e-01 & 0.106 & NA \\ 
Exclusions applied & HPT 6-item (no ROA) & RS & NS (z) & 0.036 & -0.094 & 0.165 & 5.45e-01 & 0.108 & NA \\ 
Exclusions applied & HPT 8-item (drop ROA1) & RI & (Intercept) & 2.826 & 2.686 & 2.967 & 1.40e-07 & 0.125 & NA \\ 
Exclusions applied & HPT 8-item (drop ROA1) & RI & (Intercept) & 2.827 & 2.688 & 2.966 & 1.39e-07 & 0.126 & NA \\ 
Exclusions applied & HPT 8-item (drop ROA1) & RI & (Intercept) & 2.828 & 2.690 & 2.966 & 9.32e-08 & 0.129 & NA \\ 
Exclusions applied & HPT 8-item (drop ROA1) & RI & FR-LF: RD+NS (z) & -0.013 & -0.083 & 0.058 & 7.25e-01 & 0.126 & NA \\ 
Exclusions applied & HPT 8-item (drop ROA1) & RI & KSA-3 total (z) & -0.032 & -0.105 & 0.042 & 3.93e-01 & 0.129 & NA \\ 
Exclusions applied & HPT 8-item (drop ROA1) & RI & NS (z) & 0.007 & -0.063 & 0.077 & 8.47e-01 & 0.125 & NA \\ 
Exclusions applied & HPT 9-item (POP\_rev + ROA + CONT) & RI & (Intercept) & 2.819 & 2.668 & 2.970 & 7.81e-08 & 0.131 & NA \\ 
Exclusions applied & HPT 9-item (POP\_rev + ROA + CONT) & RI & (Intercept) & 2.820 & 2.671 & 2.968 & 8.91e-08 & 0.132 & NA \\ 
Exclusions applied & HPT 9-item (POP\_rev + ROA + CONT) & RI & (Intercept) & 2.820 & 2.672 & 2.968 & 7.27e-08 & 0.133 & NA \\ 
Exclusions applied & HPT 9-item (POP\_rev + ROA + CONT) & RS & (Intercept) & 2.820 & 2.660 & 2.979 & 1.67e-07 & 0.131 & NA \\ 
Exclusions applied & HPT 9-item (POP\_rev + ROA + CONT) & RI & FR-LF: RD+NS (z) & -0.007 & -0.076 & 0.062 & 8.47e-01 & 0.132 & NA \\ 
Exclusions applied & HPT 9-item (POP\_rev + ROA + CONT) & RI & KSA-3 total (z) & -0.018 & -0.090 & 0.054 & 6.24e-01 & 0.133 & NA \\ 
Exclusions applied & HPT 9-item (POP\_rev + ROA + CONT) & RI & NS (z) & 0.016 & -0.052 & 0.085 & 6.42e-01 & 0.131 & NA \\ 
Exclusions applied & HPT 9-item (POP\_rev + ROA + CONT) & RS & NS (z) & 0.032 & -0.081 & 0.144 & 5.41e-01 & 0.131 & NA \\ 
Full & HPT 6-item (no ROA) & RI & (Intercept) & 2.842 & 2.703 & 2.981 & 1.04e-07 & 0.096 & NA \\ 
Full & HPT 6-item (no ROA) & RI & (Intercept) & 2.843 & 2.706 & 2.981 & 1.33e-07 & 0.095 & NA \\ 
Full & HPT 6-item (no ROA) & RI & (Intercept) & 2.846 & 2.712 & 2.980 & 1.67e-07 & 0.097 & NA \\ 
Full & HPT 6-item (no ROA) & RI & FR-LF: RD+NS (z) & 0.017 & -0.060 & 0.094 & 6.71e-01 & 0.095 & NA \\ 
Full & HPT 6-item (no ROA) & RI & KSA-3 total (z) & -0.026 & -0.107 & 0.054 & 5.22e-01 & 0.097 & NA \\ 
Full & HPT 6-item (no ROA) & RI & NS (z) & 0.032 & -0.044 & 0.107 & 4.12e-01 & 0.096 & NA \\ 
Full & HPT 8-item (drop ROA1) & RI & (Intercept) & 2.826 & 2.698 & 2.954 & 9.96e-08 & 0.123 & NA \\ 
Full & HPT 8-item (drop ROA1) & RI & (Intercept) & 2.826 & 2.700 & 2.953 & 1.09e-07 & 0.123 & NA \\ 
Full & HPT 8-item (drop ROA1) & RI & (Intercept) & 2.829 & 2.705 & 2.952 & 9.66e-08 & 0.126 & NA \\ 
Full & HPT 8-item (drop ROA1) & RS & (Intercept) & 2.822 & 2.687 & 2.958 & 1.66e-07 & 0.126 & NA \\ 
Full & HPT 8-item (drop ROA1) & RI & FR-LF: RD+NS (z) & 0.008 & -0.059 & 0.075 & 8.11e-01 & 0.123 & NA \\ 
Full & HPT 8-item (drop ROA1) & RI & KSA-3 total (z) & -0.027 & -0.097 & 0.043 & 4.45e-01 & 0.126 & NA \\ 
Full & HPT 8-item (drop ROA1) & RI & NS (z) & 0.015 & -0.050 & 0.081 & 6.43e-01 & 0.123 & NA \\ 
Full & HPT 8-item (drop ROA1) & RS & NS (z) & 0.029 & -0.075 & 0.132 & 5.57e-01 & 0.126 & NA \\ 
Full & HPT 9-item (POP\_rev + ROA + CONT) & RI & (Intercept) & 2.822 & 2.689 & 2.956 & 1.95e-08 & 0.128 & NA \\ 
Full & HPT 9-item (POP\_rev + ROA + CONT) & RI & (Intercept) & 2.823 & 2.691 & 2.955 & 2.20e-08 & 0.126 & NA \\ 
Full & HPT 9-item (POP\_rev + ROA + CONT) & RI & (Intercept) & 2.824 & 2.695 & 2.953 & 2.17e-08 & 0.127 & NA \\ 
Full & HPT 9-item (POP\_rev + ROA + CONT) & RI & FR-LF: RD+NS (z) & 0.016 & -0.050 & 0.081 & 6.40e-01 & 0.126 & NA \\ 
Full & HPT 9-item (POP\_rev + ROA + CONT) & RI & KSA-3 total (z) & -0.009 & -0.078 & 0.060 & 7.90e-01 & 0.127 & NA \\ 
Full & HPT 9-item (POP\_rev + ROA + CONT) & RI & NS (z) & 0.028 & -0.037 & 0.092 & 3.99e-01 & 0.128 & NA \\ 
\bottomrule
\end{tabular*}
\end{table}

\hypertarget{sanity-plots}{%
\section{5. Sanity plots}\label{sanity-plots}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dat }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(NS\_sum, HPT\_total\_9)) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{(}\AttributeTok{alpha=}\NormalTok{.}\DecValTok{25}\NormalTok{) }\SpecialCharTok{+} \FunctionTok{geom\_smooth}\NormalTok{(}\AttributeTok{method=}\StringTok{"lm"}\NormalTok{, }\AttributeTok{se=}\ConstantTok{TRUE}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{x=}\StringTok{"NS (sum)"}\NormalTok{, }\AttributeTok{y=}\StringTok{"HPT total (9{-}item, POP\_rev)"}\NormalTok{,}
       \AttributeTok{title=}\StringTok{"Bivariate check (unadjusted): NS vs. HPT total (POP reversed)"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{plot.title.position=}\StringTok{"plot"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## `geom_smooth()` using formula = 'y ~ x'
\end{verbatim}

\begin{verbatim}
## Warning: Removed 5 rows containing non-finite outside the scale range
## (`stat_smooth()`).
\end{verbatim}

\begin{verbatim}
## Warning: Removed 5 rows containing missing values or values outside the scale
## range (`geom_point()`).
\end{verbatim}

\includegraphics{/home/yetty/Projects/phd-029-hpt-and-extremism/outputs/05_sensitivity-analyses_files/figure-latex/quick-plots-1.pdf}

\hypertarget{read-outs-for-prose}{%
\section{6. Read-outs for prose}\label{read-outs-for-prose}}

\begin{itemize}
\tightlist
\item
  \textbf{Stable conclusions} across HPT \textbf{9/8/6} scoring →
  results \textbf{do not depend} on ROA items.
\item
  \textbf{NS-only} ≳ \textbf{KSA-3} → supports the \textbf{ideological
  contamination} concern.
\item
  Survives \textbf{knowledge/SDR exclusions} → less likely driven by
  misunderstanding or impression management.
\item
  \textbf{Random slopes needed} → ideology effects differ \textbf{by
  class} (pedagogical moderation hypothesis).
\end{itemize}

\hypertarget{reproducibility-appendix}{%
\section{Reproducibility appendix}\label{reproducibility-appendix}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{sessionInfo}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## R version 4.4.2 (2024-10-31)
## Platform: x86_64-pc-linux-gnu
## Running under: Ubuntu 24.04.3 LTS
## 
## Matrix products: default
## BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.12.0 
## LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.12.0
## 
## locale:
##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
##  [3] LC_TIME=cs_CZ.UTF-8        LC_COLLATE=en_US.UTF-8    
##  [5] LC_MONETARY=cs_CZ.UTF-8    LC_MESSAGES=en_US.UTF-8   
##  [7] LC_PAPER=cs_CZ.UTF-8       LC_NAME=C                 
##  [9] LC_ADDRESS=C               LC_TELEPHONE=C            
## [11] LC_MEASUREMENT=cs_CZ.UTF-8 LC_IDENTIFICATION=C       
## 
## time zone: Europe/Prague
## tzcode source: system (glibc)
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] gt_1.1.0            glue_1.8.0          performance_0.15.1 
##  [4] broom.mixed_0.2.9.6 broom_1.0.7         lmerTest_3.1-3     
##  [7] lme4_1.1-38         Matrix_1.7-1        lubridate_1.9.4    
## [10] forcats_1.0.0       stringr_1.5.1       dplyr_1.1.4        
## [13] purrr_1.1.0         readr_2.1.5         tidyr_1.3.1        
## [16] tibble_3.2.1        ggplot2_4.0.1       tidyverse_2.0.0    
## 
## loaded via a namespace (and not attached):
##  [1] gtable_0.3.6        xfun_0.54           insight_1.4.2      
##  [4] lattice_0.22-5      tzdb_0.5.0          numDeriv_2016.8-1.1
##  [7] vctrs_0.6.5         tools_4.4.2         Rdpack_2.6.4       
## [10] generics_0.1.3      parallel_4.4.2      pkgconfig_2.0.3    
## [13] RColorBrewer_1.1-3  S7_0.2.1            lifecycle_1.0.4    
## [16] compiler_4.4.2      farver_2.1.2        codetools_0.2-20   
## [19] htmltools_0.5.8.1   yaml_2.3.10         pillar_1.10.0      
## [22] furrr_0.3.1         nloptr_2.2.1        MASS_7.3-61        
## [25] reformulas_0.4.1    boot_1.3-31         nlme_3.1-166       
## [28] parallelly_1.45.1   tidyselect_1.2.1    digest_0.6.37      
## [31] stringi_1.8.4       future_1.68.0       listenv_0.10.0     
## [34] labeling_0.4.3      splines_4.4.2       fastmap_1.2.0      
## [37] grid_4.4.2          cli_3.6.5           magrittr_2.0.3     
## [40] withr_3.0.2         scales_1.4.0        backports_1.5.0    
## [43] timechange_0.3.0    rmarkdown_2.29      globals_0.18.0     
## [46] hms_1.1.3           evaluate_1.0.5      knitr_1.50         
## [49] rbibutils_2.3       mgcv_1.9-1          rlang_1.1.6        
## [52] Rcpp_1.0.13-1       xml2_1.3.6          minqa_1.2.8        
## [55] R6_2.6.1            fs_1.6.5
\end{verbatim}

\end{document}
